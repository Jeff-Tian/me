(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"175":function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(33),i=n(1),a=n(143),c=n(168),u=n(9),s=(n(46),n(64)),l=n.n(s),f=n(37),p=n(65),y=n(36),d=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),h=function get(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:get(o,t,n)}if("value"in r)return r.value;var i=r.get;return void 0!==i?i.call(n):void 0};function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,o){try{var i=t[r](o),a=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}("next")})}}var b=function(e){function Citi(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Citi);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Citi.__proto__||Object.getPrototypeOf(Citi)).apply(this,arguments));return e.config={"navigationBarTitleText":"花旗账号登录中，请稍等…… | 我的个人中心"},e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Citi,i["a"].Component),d(Citi,[{"key":"componentWillReceiveProps","value":function componentWillReceiveProps(e){console.log(this.props,e)}},{"key":"componentWillUnmount","value":function componentWillUnmount(){}},{"key":"componentDidShow","value":function componentDidShow(){window.opener&&window.opener.postMessage(window.location.search,window.location.origin),this.props.citiLogin()}},{"key":"componentDidHide","value":function componentDidHide(){}},{"key":"render","value":function render(){return r.j.createElement(y.a,null,r.j.createElement(c.a,{"className":"container"},r.j.createElement("p",null,"登录成功，窗口即将关闭……")))}},{"key":"componentDidMount","value":function componentDidMount(){h(Citi.prototype.__proto__||Object.getPrototypeOf(Citi.prototype),"componentDidMount",this)&&h(Citi.prototype.__proto__||Object.getPrototypeOf(Citi.prototype),"componentDidMount",this).call(this)}}]),Citi}();b=Object(o.__decorate)([Object(u.b)(function(e){return function _objectDestructuringEmpty(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e),{}},function(e){return{"login":function login(){e(Object(f.b)())},"setUser":function setUser(t){e(Object(f.g)(t))},"citiLogin":function citiLogin(){var t,n=this,r=l.a.parse(window.location.search.substr(1));r.token&&p.a.loginByToken(e)(r).then((t=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){var t;return regeneratorRuntime.wrap(function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:if(!(t=Object(a.b)("returnPath"))){r.next=6;break}return r.next=4,i.a.navigateTo({"url":t,"fail":function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.navigateTo(e);case 2:case"end":return t.stop()}},_callee,n)}));return function fail(){return t.apply(this,arguments)}}(),"success":function success(){Object(a.c)("returnPath")}});case 4:r.next=8;break;case 6:return r.next=8,i.a.navigateTo(e);case 8:case"end":return r.stop()}},_callee2,n)})),function(e){return t.apply(this,arguments)}))}}})],b),t.default=b},"36":function(e,t,n){"use strict";var r=n(0),o=n(1),i=n(168),a=n(169),c=n(174),u=n(173),s=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var l=new Map([["账号信息","/"],["账号绑定","/pages/accounts/bind"],["卡片信息","/pages/cards/cards"],["产品列表","/pages/cards/product-list"]]),f=function(e){function Drawer(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Drawer),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Drawer.__proto__||Object.getPrototypeOf(Drawer)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Drawer,o["a"].Component),s(Drawer,[{"key":"render","value":function render(){var e,t=this,n=this.props,i=(e=function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,o){try{var i=t[r](o),a=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}("next")})}}(regeneratorRuntime.mark(function _callee(e){return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.navigateTo({"url":[].concat(_toConsumableArray(l.values()))[e]});case 2:case"end":return t.stop()}},_callee,t)})),function onItemClick(t){return e.apply(this,arguments)});return r.j.createElement(u.a,{"show":n.show,"right":!0,"mask":!0,"onClose":n.onClose,"items":[].concat(_toConsumableArray(l.keys())),"onItemClick":i})}}]),Drawer}();n.d(t,"a",function(){return d});var p=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),y=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var d=function(e){function HardwayLayout(){return function layout_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HardwayLayout),function layout_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(HardwayLayout.__proto__||Object.getPrototypeOf(HardwayLayout)).apply(this,arguments))}return function layout_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(HardwayLayout,o["a"].Component),y(HardwayLayout,[{"key":"render","value":function render(){var e=this.props,t=o.a.useState(!1),n=p(t,2),u=n[0],s=n[1];return r.j.createElement(i.a,{"className":"index"},r.j.createElement(a.a,null),r.j.createElement(c.a,{"onClickRgIconSt":function onOpenDrawer(){return s(!0)},"onClickRgIconNd":function onClickRgIconNd(){},"onClickLeftIcon":function onClickLeftIcon(){},"color":"#000","title":"我的个人中心","leftText":"返回","leftIconType":"chevron-left","rightFirstIconType":"bullet-list","rightSecondIconType":"user"}),r.j.createElement(i.a,{"className":"container"},e.children),r.j.createElement(f,{"show":u,"onClose":function onCloseDrawer(){return s(!1)}}))}}]),HardwayLayout}()},"37":function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"g",function(){return a}),n.d(t,"a",function(){return c}),n.d(t,"c",function(){return u}),n.d(t,"f",function(){return s}),n.d(t,"e",function(){return l});var r=n(5),o=function login(){return{"type":r.c}},i=function logout(){return{"type":r.d}},a=function setUser(e){return{"type":r.g,"user":e}},c=function loggedIn(e){return{"type":r.a,"token":e}},u=function loginCancelled(){return{"type":r.b}},s=function setLoading(e){return{"type":r.f,"loading":e}},l=function setChecking(e){return{"type":r.e,"checking":e}}},"65":function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(66),o=n(143),i=n(171),a=n(183),c=n(37),u=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var s,l=void 0;s={"clientID":"bacb8d3b-6ee0-4443-9bea-b54485a5a20d","authority":"https://login.microsoftonline.com/tfp/unihearti.onmicrosoft.com/B2C_1_tictactoe","b2cScopes":["https://unihearti.onmicrosoft.com/hello/demo.read"]},l=new r.UserAgentApplication(s.clientID,s.authority,function(e,t,n,r){console.log(e,t,n,r)});var f=function(){function User(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,User)}return u(User,null,[{"key":"getAgent","value":function getAgent(){return l}},{"key":"get","value":function get(){return l.getUser()}},{"key":"login","value":function login(){return l.loginRedirect(s.b2cScopes)}},{"key":"logout","value":function logout(){l.logout()}},{"key":"loginByToken","value":function loginByToken(e){var t,n=this;return t=function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,o){try{var i=t[r](o),a=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}("next")})}}(regeneratorRuntime.mark(function _callee(t){var r,u;return regeneratorRuntime.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return e(Object(c.a)(t.token)),Object(o.e)("token",t),n.prev=2,e(Object(c.b)()),n.next=6,Object(i.a)({"url":"https://uniheart.pa-ca.me/jwt/user","header":{"Authorization":"Bearer "+t.token,"accept":"application/json"},"method":"GET"});case 6:return r=n.sent,e(Object(c.a)(t.token)),e(Object(c.g)(r.data)),Object(o.e)("userInfo",r.data),n.abrupt("return",{"url":t.returnUrl||"/"});case 13:if(n.prev=13,n.t0=n.catch(2),console.error("碰到了错误：",n.t0),u="发生了错误",401!==n.t0.status){n.next=23;break}if(u="登录失败",n.t0.bodyUsed){n.next=23;break}return n.next=22,n.t0.text();case 22:u=n.sent;case 23:return n.next=25,Object(a.c)({"title":"出错了","content":u});case 25:e(Object(c.a)(""));case 26:case"end":return n.stop()}},_callee,n,[[2,13]])})),function(e){return t.apply(this,arguments)}}}]),User}()}}]);