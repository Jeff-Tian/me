(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"136":function(e,t,n){var r=n(137);"string"==typeof r&&(r=[[e.i,r,""]]);var o={"sourceMap":!1,"insertAt":"top","hmr":!0,"transform":void 0,"insertInto":void 0};n(43)(r,o);r.locals&&(e.exports=r.locals)},"137":function(e,t,n){(e.exports=n(42)(!1)).push([e.i,"input {\n  display: block;\n  height: 1.4rem;\n  text-align: inherit;\n  text-overflow: clip;\n  overflow: hidden;\n  white-space: nowrap;\n}",""])},"146":function(e,t,n){},"158":function(e){e.exports={"name":"@jeff-tian/me","version":"0.0.0-development","description":"我的个人中心","scripts":{"build:weapp":"taro build --type weapp","build:swan":"taro build --type swan","build:alipay":"taro build --type alipay","build:tt":"taro build --type tt","build:h5":"taro build --type h5","build:rn":"taro build --type rn","build":"node_modules/.bin/taro build --type h5","dev:weapp":"npm run build:weapp -- --watch","dev:swan":"npm run build:swan -- --watch","dev:alipay":"npm run build:alipay -- --watch","dev:tt":"npm run build:tt -- --watch","dev:h5":"npm run build:h5 -- --watch","dev:rn":"npm run build:rn -- --watch","e2e":"jest --config jest.config.js --detectOpenHandles","lint":"eslint . --fix","semantic-release":"semantic-release","test":"jest --config jest-unittest.config.js"},"author":"jeff.tian@outlook.com","homepage":"https://pa-ca.me/","license":"MIT","dependencies":{"@tarojs/async-await":"1.3.22","@tarojs/components":"1.3.22","@tarojs/redux":"1.3.22","@tarojs/redux-h5":"1.3.22","@tarojs/router":"1.3.22","@tarojs/taro":"1.3.22","@tarojs/taro-alipay":"1.3.22","@tarojs/taro-h5":"1.3.22","@tarojs/taro-swan":"1.3.22","@tarojs/taro-tt":"1.3.22","@tarojs/taro-weapp":"1.3.22","msal":"0.2.4","nerv-devtools":"^1.5.3","nervjs":"^1.5.3","ramda":"^0.26.1","react":"16.9.0","redux":"4.0.1","redux-logger":"3.0.6","redux-thunk":"2.3.0","taro-ui":"2.0.2","uni-user":"latest"},"devDependencies":{"@babel/core":"^7.6.4","@babel/preset-env":"^7.6.3","@tarojs/cli":"1.3.22","@tarojs/plugin-babel":"1.3.22","@tarojs/plugin-csso":"1.3.22","@tarojs/plugin-stylus":"1.3.22","@tarojs/plugin-uglifyjs":"1.3.22","@tarojs/webpack-runner":"1.3.22","@types/jest":"^24.0.23","@types/jest-environment-puppeteer":"^4.3.1","@types/node":"^12.12.7","@types/puppeteer":"^1.20.2","@types/ramda":"github:types/npm-ramda#dist","@types/react":"16.8.8","@types/webpack-env":"1.13.9","babel-eslint":"8.2.6","babel-jest":"^24.9.0","babel-plugin-transform-class-properties":"6.24.1","babel-plugin-transform-decorators-legacy":"1.3.5","babel-plugin-transform-jsx-stylesheet":"0.6.5","babel-plugin-transform-object-rest-spread":"6.26.0","babel-preset-env":"^1.7.0","enzyme":"latest","enzyme-adapter-react-16":"latest","eslint":"4.19.1","eslint-config-prettier":"^6.5.0","eslint-config-taro":"1.3.22","eslint-plugin-import":"2.16.0","eslint-plugin-prettier":"^3.1.1","eslint-plugin-react":"7.12.4","eslint-plugin-react-hooks":"^2.3.0","eslint-plugin-taro":"1.3.22","eslint-plugin-typescript":"0.12.0","gifencoder":"^2.0.1","jest":"^24.9.0","jest-puppeteer":"^4.3.0","png-file-stream":"^1.2.1","prettier":"^1.18.2","puppeteer":"^2.0.0","puppeteer-core":"^2.0.0","react-dom":"^16.12.0","semantic-release":"^15.13.30","taro":"*","ts-jest":"^24.1.0","typescript":"3.6.3"},"repository":{"type":"git","url":"https://github.com/Jeff-Tian/me.git"},"publishConfig":{"access":"public"}}},"159":function(e,t,n){},"165":function(e,t,n){"use strict";var r=n(1),o=n(0),i=n(168),a=n(88),s=(n(34),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}());var c=function(e){function Form(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Form);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Form.__proto__||Object.getPrototypeOf(Form)).apply(this,arguments));return e.Forms=[],e.onSubmit=e.onSubmit.bind(e),e.onReset=e.onReset.bind(e),e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Form,o["j"].Component),s(Form,[{"key":"onSubmit","value":function onSubmit(e){e.preventDefault();for(var t=o.j.findDOMNode(this),n=[],r=t.getElementsByTagName("input"),i=0;i<r.length;i++)n.push(r[i]);var a={},s={};n.forEach(function(e){-1===e.className.indexOf("weui-switch")?"radio"!==e.type?"checkbox"!==e.type?a[e.name]=e.value:e.checked?s[e.name]?a[e.name].push(e.value):(s[e.name]=!0,a[e.name]=[e.value]):s[e.name]||(a[e.name]=[]):e.checked?(s[e.name]=!0,a[e.name]=e.value):s[e.name]||(a[e.name]=""):a[e.name]=e.checked});for(var c=t.getElementsByTagName("textarea"),u=[],l=0;l<c.length;l++)u.push(c[l]);u.forEach(function(e){a[e.name]=e.value}),Object.defineProperty(e,"detail",{"enumerable":!0,"value":{"value":a}}),this.props.onSubmit(e)}},{"key":"onReset","value":function onReset(e){e.preventDefault(),this.props.onReset()}},{"key":"render","value":function render(){var e=this.props,t=e.className,n=e.style;return o.j.createElement("form",{"className":t,"style":n,"onSubmit":this.onSubmit,"onReset":this.onReset},this.props.children)}}]),Form}(),u=n(32),l=n.n(u),p=n(28),d=n.n(p),f=n(30),h=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var g=function(e){function AtLoading(){return function loading_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AtLoading),function loading_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(AtLoading.__proto__||Object.getPrototypeOf(AtLoading)).apply(this,arguments))}return function loading_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AtLoading,f["a"]),h(AtLoading,[{"key":"render","value":function render(){var e=this.props,t=e.color,n=e.size,a={"width":n?""+r.a.pxTransform(parseInt(n)):"","height":n?""+r.a.pxTransform(parseInt(n)):""},s={"border":t?"1px solid "+t:"","border-color":t?t+" transparent transparent transparent":""},c=Object.assign({},s,a);return o.j.createElement(i.a,{"className":"at-loading","style":a},o.j.createElement(i.a,{"className":"at-loading__ring","style":c}),o.j.createElement(i.a,{"className":"at-loading__ring","style":c}),o.j.createElement(i.a,{"className":"at-loading__ring","style":c}))}}]),AtLoading}();g.defaultProps={"size":0,"color":""},g.propTypes={"size":l.a.oneOfType([l.a.string,l.a.number]),"color":l.a.oneOfType([l.a.string,l.a.number])},n.d(t,"a",function(){return v});var y=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{"value":n,"enumerable":!0,"configurable":!0,"writable":!0}):e[t]=n,e}var m={"normal":"normal","small":"small"},b={"primary":"primary","secondary":"secondary"},v=function(e){function AtButton(){!function button_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AtButton);var e=function button_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(AtButton.__proto__||Object.getPrototypeOf(AtButton)).apply(this,arguments));return e.state={"isWEB":r.a.getEnv()===r.a.ENV_TYPE.WEB,"isWEAPP":r.a.getEnv()===r.a.ENV_TYPE.WEAPP,"isALIPAY":r.a.getEnv()===r.a.ENV_TYPE.ALIPAY},e}return function button_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AtButton,f["a"]),y(AtButton,[{"key":"onClick","value":function onClick(){var e;this.props.disabled||this.props.onClick&&(e=this.props).onClick.apply(e,arguments)}},{"key":"onGetUserInfo","value":function onGetUserInfo(){var e;this.props.onGetUserInfo&&(e=this.props).onGetUserInfo.apply(e,arguments)}},{"key":"onContact","value":function onContact(){var e;this.props.onContact&&(e=this.props).onContact.apply(e,arguments)}},{"key":"onGetPhoneNumber","value":function onGetPhoneNumber(){var e;this.props.onGetPhoneNumber&&(e=this.props).onGetPhoneNumber.apply(e,arguments)}},{"key":"onError","value":function onError(){var e;this.props.onError&&(e=this.props).onError.apply(e,arguments)}},{"key":"onOpenSetting","value":function onOpenSetting(){var e;this.props.onOpenSetting&&(e=this.props).onOpenSetting.apply(e,arguments)}},{"key":"onSumit","value":function onSumit(){this.state.isWEAPP&&this.$scope.triggerEvent("submit",arguments[0].detail,{"bubbles":!0,"composed":!0})}},{"key":"onReset","value":function onReset(){this.state.isWEAPP&&this.$scope.triggerEvent("reset",arguments[0].detail,{"bubbles":!0,"composed":!0})}},{"key":"render","value":function render(){var e,t=this.props,n=t.size,r=void 0===n?"normal":n,s=t.type,u=void 0===s?"":s,l=t.circle,p=t.full,f=t.loading,h=t.disabled,y=t.customStyle,v=t.formType,C=t.openType,_=t.lang,w=t.sessionFrom,k=t.sendMessageTitle,I=t.sendMessagePath,P=t.sendMessageImg,A=t.showMessageCard,E=t.appParameter,O=this.state,S=O.isWEAPP,T=O.isALIPAY,j=["at-button"],U=(_defineProperty(e={},"at-button--"+m[r],m[r]),_defineProperty(e,"at-button--disabled",h),_defineProperty(e,"at-button--"+u,b[u]),_defineProperty(e,"at-button--circle",l),_defineProperty(e,"at-button--full",p),e),x="primary"===u?"#fff":"",R="small"===r?"30":0,L=void 0;f&&(L=o.j.createElement(i.a,{"className":"at-button__icon"},o.j.createElement(g,{"color":x,"size":R})),j.push("at-button--icon"));var D=o.j.createElement(a.a,{"className":"at-button__wxbutton","formType":v,"openType":C,"lang":_,"sessionFrom":w,"sendMessageTitle":k,"sendMessagePath":I,"sendMessageImg":P,"showMessageCard":A,"appParameter":E,"onGetUserInfo":this.onGetUserInfo.bind(this),"onGetPhoneNumber":this.onGetPhoneNumber.bind(this),"onOpenSetting":this.onOpenSetting.bind(this),"onError":this.onError.bind(this),"onContact":this.onContact.bind(this)});return o.j.createElement(i.a,{"className":d()(j,U,this.props.className),"style":y,"onClick":this.onClick.bind(this)},S&&!h&&o.j.createElement(c,{"reportSubmit":!0,"onSubmit":this.onSumit.bind(this),"onReset":this.onReset.bind(this)},D),T&&!h&&D,L,o.j.createElement(i.a,{"className":"at-button__text"},this.props.children))}}]),AtButton}();v.defaultProps={"size":"normal","type":"","circle":!1,"full":!1,"loading":!1,"disabled":!1,"customStyle":{},"onClick":function onClick(){},"formType":"","openType":"","lang":"en","sessionFrom":"","sendMessageTitle":"","sendMessagePath":"","sendMessageImg":"","showMessageCard":!1,"appParameter":"","onGetUserInfo":function onGetUserInfo(){},"onContact":function onContact(){},"onGetPhoneNumber":function onGetPhoneNumber(){},"onError":function onError(){},"onOpenSetting":function onOpenSetting(){}},v.propTypes={"size":l.a.oneOf(["normal","small"]),"type":l.a.oneOf(["primary","secondary",""]),"circle":l.a.bool,"full":l.a.bool,"loading":l.a.bool,"disabled":l.a.bool,"onClick":l.a.func,"customStyle":l.a.oneOfType([l.a.object,l.a.string]),"formType":l.a.oneOf(["submit","reset",""]),"openType":l.a.oneOf(["contact","share","getUserInfo","getPhoneNumber","launchApp","openSetting","feedback","getRealnameAuthInfo",""]),"lang":l.a.string,"sessionFrom":l.a.string,"sendMessageTitle":l.a.string,"sendMessagePath":l.a.string,"sendMessageImg":l.a.string,"showMessageCard":l.a.bool,"appParameter":l.a.string,"onGetUserInfo":l.a.func,"onContact":l.a.func,"onGetPhoneNumber":l.a.func,"onError":l.a.func,"onOpenSetting":l.a.func}},"180":function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(33),i=n(168),a=n(9),s=n(143),c=n(1),u=n(169),l=n(32),p=n.n(l),d=n(28),f=n.n(d),h=n(30),g=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var y=function(e){function AtDivider(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AtDivider),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(AtDivider.__proto__||Object.getPrototypeOf(AtDivider)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AtDivider,h["a"]),g(AtDivider,[{"key":"render","value":function render(){var e=this.props,t=e.className,n=e.customStyle,o=e.content,a=e.height,s=e.fontColor,u=e.fontSize,l=e.lineColor,p={"height":a?""+c.a.pxTransform(a):""},d={"color":s,"font-size":u?""+c.a.pxTransform(u):""},h={"background-color":l};return r.j.createElement(i.a,{"className":f()("at-divider",t),"style":this.mergeStyle(p,n)},r.j.createElement(i.a,{"className":"at-divider__content","style":d},""===o?this.props.children:o),r.j.createElement(i.a,{"className":"at-divider__line","style":h}))}}]),AtDivider}();y.defaultProps={"content":"","height":0,"fontColor":"","fontSize":0,"lineColor":""},y.propTypes={"customStyle":p.a.oneOfType([p.a.object,p.a.string]),"className":p.a.oneOfType([p.a.array,p.a.string]),"content":p.a.string,"height":p.a.oneOfType([p.a.number,p.a.string]),"fontColor":p.a.string,"fontSize":p.a.oneOfType([p.a.number,p.a.string]),"lineColor":p.a.string};var m=n(165),b=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var v=function(e){function AtCurtain(){return function curtain_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AtCurtain),function curtain_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(AtCurtain.__proto__||Object.getPrototypeOf(AtCurtain)).apply(this,arguments))}return function curtain_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AtCurtain,h["a"]),b(AtCurtain,[{"key":"onClose","value":function onClose(e){var t;e.stopPropagation(),(t=this.props).onClose.apply(t,arguments)}},{"key":"_stopPropagation","value":function _stopPropagation(e){e.stopPropagation()}},{"key":"render","value":function render(){var e=this.props,t=e.className,n=e.customStyle,o=e.isOpened,a=e.closeBtnPosition,s=f()({"at-curtain":!0,"at-curtain--closed":!o},t),c=f()(function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{"value":n,"enumerable":!0,"configurable":!0,"writable":!0}):e[t]=n,e}({"at-curtain__btn-close":!0},"at-curtain__btn-close--"+a,a));return r.j.createElement(i.a,{"className":s,"style":n,"onClick":this._stopPropagation},r.j.createElement(i.a,{"className":"at-curtain__container"},r.j.createElement(i.a,{"className":"at-curtain__body"},this.props.children,r.j.createElement(i.a,{"className":c,"onClick":this.onClose.bind(this)}))))}}]),AtCurtain}();v.defaultProps={"customStyle":"","className":"","isOpened":!1,"closeBtnPosition":"bottom","onClose":function onClose(){}},v.propTypes={"customStyle":p.a.oneOfType([p.a.object,p.a.string]),"className":p.a.oneOfType([p.a.array,p.a.string]),"isOpened":p.a.bool,"closeBtnPosition":p.a.string,"onClose":p.a.func};n(34);var C=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var _=function(e){function Label(){return function label_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Label),function label_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Label.__proto__||Object.getPrototypeOf(Label)).apply(this,arguments))}return function label_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Label,r["j"].Component),C(Label,[{"key":"render","value":function render(){var e=function _objectWithoutProperties(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(this.props,[]);return r.j.createElement("label",e,this.props.children)}}]),Label}(),w=n(41),k=(n(136),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),I=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();function getTrueType(e,t,n){if(!e)throw new Error("unexpected type");return"search"===t&&(e="search"),n&&(e="password"),"digit"===e&&(e="number"),e}var P=function(e){function Input(){!function input_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Input);var e=function input_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Input.__proto__||Object.getPrototypeOf(Input)).apply(this,arguments));return e.onInput=e.onInput.bind(e),e.onFocus=e.onFocus.bind(e),e.onBlur=e.onBlur.bind(e),e.onKeyDown=e.onKeyDown.bind(e),e.handleComposition=e.handleComposition.bind(e),e.isOnComposition=!1,e.onInputExcuted=!1,e}return function input_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Input,r["j"].Component),I(Input,[{"key":"componentDidMount","value":function componentDidMount(){"file"===this.props.type&&this.inputRef.addEventListener("change",this.onInput)}},{"key":"componentWillUnMount","value":function componentWillUnMount(){"file"===this.props.type&&this.inputRef.removeEventListener("change",this.onInput)}},{"key":"onInput","value":function onInput(e){var t=this.props,n=t.type,r=t.maxLength,o=t.confirmType,i=t.password,a=t.onInput,onInput=void 0===a?"":a,s=t.onChange,c=void 0===s?"":s;if(!this.isOnComposition&&!this.onInputExcuted){var u=e.target.value,l=getTrueType(n,o,i);if(this.onInputExcuted=!0,"number"===l&&u&&r<=u.length&&(u=u.substring(0,r),e.target.value=u),Object.defineProperty(e,"detail",{"enumerable":!0,"value":{"value":u}}),!(["number","file"].indexOf(l)>=0)){var p=e.target.selectionEnd;setTimeout(function(){e.target.selectionStart=p,e.target.selectionEnd=p})}if(c)return c(e);if(onInput)return onInput(e)}}},{"key":"onFocus","value":function onFocus(e){var onFocus=this.props.onFocus;this.onInputExcuted=!1,Object.defineProperty(e,"detail",{"enumerable":!0,"value":{"value":e.target.value}}),onFocus&&onFocus(e)}},{"key":"onBlur","value":function onBlur(e){var onBlur=this.props.onBlur;Object.defineProperty(e,"detail",{"enumerable":!0,"value":{"value":e.target.value}}),onBlur&&onBlur(e)}},{"key":"onKeyDown","value":function onKeyDown(e){var t=this.props,n=t.onConfirm,onKeyDown=t.onKeyDown;this.onInputExcuted=!1,onKeyDown&&onKeyDown(e),13===e.keyCode&&n&&(Object.defineProperty(e,"detail",{"enumerable":!0,"value":{"value":e.target.value}}),n(e))}},{"key":"handleComposition","value":function handleComposition(e){e.target instanceof HTMLInputElement&&("compositionend"===e.type?(this.isOnComposition=!1,this.onInput(e)):this.isOnComposition=!0)}},{"key":"render","value":function render(){var e=this,t=this.props,n=t.className,o=void 0===n?"":n,i=t.placeholder,a=t.type,s=void 0===a?"text":a,c=t.password,u=t.disabled,l=t.maxLength,p=t.confirmType,d=void 0===p?"":p,h=t.focus,g=void 0!==h&&h,y=t.value,m=f()("weui-input",o),b=Object(w.a)(this.props,["className","placeholder","disabled","max","onChange","onFocus","onBlur","type","focus"]);return"value"in this.props&&(b.value=function fixControlledValue(e){return void 0===e||null===e?"":e}(y)),r.j.createElement("input",k({"ref":function ref(t){e.inputRef=t,t&&g&&t.focus()}},b,{"className":m,"placeholder":i,"disabled":u,"maxlength":l,"onInput":this.onInput,"onFocus":this.onFocus,"onBlur":this.onBlur,"autofocus":g,"onKeyDown":this.onKeyDown,"type":getTrueType(s,d,c),"onCompositionStart":this.handleComposition,"onCompositionEnd":this.handleComposition}))}}]),Input}();P.defaultProps={"type":"text"};var A=P,E=n(170),O=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();function components_input_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var S=function(e){function AtInput(){var e,t,n;!function components_input_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AtInput);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=n=components_input_possibleConstructorReturn(this,(e=AtInput.__proto__||Object.getPrototypeOf(AtInput)).call.apply(e,[this].concat(o))),n.onInput=function(e){for(var t,r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return(t=n.props).onChange.apply(t,[e.target.value].concat(o))},n.onFocus=function(e){for(var t,r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return(t=n.props).onFocus.apply(t,[e.target.value].concat(o))},n.onBlur=function(e){for(var t,r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return(t=n.props).onBlur.apply(t,[e.target.value].concat(o))},n.onConfirm=function(e){for(var t,r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return(t=n.props).onConfirm.apply(t,[e.target.value].concat(o))},n.onClick=function(){var e;return!n.props.editable&&(e=n.props).onClick.apply(e,arguments)},n.clearValue=function(){for(var e,t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=n.props).onChange.apply(e,[""].concat(r))},n.onErrorClick=function(){var e;return(e=n.props).onErrorClick.apply(e,arguments)},components_input_possibleConstructorReturn(n,t)}return function components_input_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AtInput,h["a"]),O(AtInput,[{"key":"render","value":function render(){var e=this.props,t=e.className,n=e.customStyle,o=e.name,a=e.cursorSpacing,s=e.confirmType,c=e.cursor,u=e.selectionStart,l=e.selectionEnd,p=e.adjustPosition,d=e.border,h=e.title,g=e.error,y=e.clear,m=e.placeholder,b=e.placeholderStyle,v=e.placeholderClass,C=e.autoFocus,w=e.focus,k=e.value,I=function getInputProps(e){var t={"type":e.type,"maxLength":e.maxLength,"disabled":e.disabled,"password":!1};switch(t.type){case"phone":t.type="number",t.maxLength=11;break;case"password":t.password=!0}return e.disabled||e.editable||(t.disabled=!0),t}(this.props),P=I.type,O=I.maxLength,S=I.disabled,T=I.password,j=f()("at-input",{"at-input--without-border":!d},t),U=f()("at-input__container",{"at-input--error":g,"at-input--disabled":S}),x=f()("at-input__overlay",{"at-input__overlay--hidden":!S}),R=f()("placeholder",v);return r.j.createElement(i.a,{"className":j,"style":n},r.j.createElement(i.a,{"className":U},r.j.createElement(i.a,{"className":x,"onClick":this.onClick}),h&&r.j.createElement(_,{"className":"at-input__title","for":o},h),r.j.createElement(A,{"className":"at-input__input","id":o,"name":o,"type":P,"password":T,"placeholderStyle":b,"placeholderClass":R,"placeholder":m,"cursorSpacing":a,"maxLength":O,"autoFocus":C,"focus":w,"value":k,"confirmType":s,"cursor":c,"selectionStart":u,"selectionEnd":l,"adjustPosition":p,"onInput":this.onInput,"onFocus":this.onFocus,"onBlur":this.onBlur,"onConfirm":this.onConfirm}),y&&k&&r.j.createElement(i.a,{"className":"at-input__icon","onTouchStart":this.clearValue},r.j.createElement(E.a,{"className":"at-icon at-icon-close-circle at-input__icon-close"})),g&&r.j.createElement(i.a,{"className":"at-input__icon","onTouchStart":this.onErrorClick},r.j.createElement(E.a,{"className":"at-icon at-icon-alert-circle at-input__icon-alert"})),r.j.createElement(i.a,{"className":"at-input__children"},this.props.children)))}}]),AtInput}();S.defaultProps={"className":"","customStyle":"","value":"","name":"","placeholder":"","placeholderStyle":"","placeholderClass":"","title":"","cursorSpacing":50,"confirmType":"完成","cursor":0,"selectionStart":-1,"selectionEnd":-1,"adjustPosition":!0,"maxLength":140,"type":"text","disabled":!1,"border":!0,"editable":!0,"error":!1,"clear":!1,"autoFocus":!1,"focus":!1,"onChange":function onChange(){},"onFocus":function onFocus(){},"onBlur":function onBlur(){},"onConfirm":function onConfirm(){},"onErrorClick":function onErrorClick(){},"onClick":function onClick(){}},S.propTypes={"className":p.a.oneOfType([p.a.string,p.a.array]),"customStyle":p.a.oneOfType([p.a.string,p.a.object]),"value":p.a.oneOfType([p.a.string,p.a.number]),"name":p.a.string,"placeholder":p.a.string,"placeholderStyle":p.a.string,"placeholderClass":p.a.string,"title":p.a.string,"confirmType":p.a.string,"cursor":p.a.oneOfType([p.a.string,p.a.number]),"selectionStart":p.a.oneOfType([p.a.string,p.a.number]),"selectionEnd":p.a.oneOfType([p.a.string,p.a.number]),"adjustPosition":p.a.bool,"cursorSpacing":p.a.oneOfType([p.a.string,p.a.number]),"maxLength":p.a.oneOfType([p.a.string,p.a.number]),"type":p.a.string,"disabled":p.a.bool,"border":p.a.bool,"editable":p.a.bool,"error":p.a.bool,"clear":p.a.bool,"backgroundColor":p.a.string,"autoFocus":p.a.bool,"focus":p.a.bool,"onChange":p.a.func,"onFocus":p.a.func,"onBlur":p.a.func,"onConfirm":p.a.func,"onErrorClick":p.a.func,"onClick":p.a.func};n(95);var T=n(4),j=n(10),U=n(11),x=Object(T.c)({"login":U.a}),R=T.d,L=[j.a];var D=R(T.a.apply(void 0,L)),N=function configStore(){return Object(T.e)(x,D)},q=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var M=N(),F=function(e){function UniUserContainer(){return function UniUserContainer_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,UniUserContainer),function UniUserContainer_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(UniUserContainer.__proto__||Object.getPrototypeOf(UniUserContainer)).apply(this,arguments))}return function UniUserContainer_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(UniUserContainer,c["a"].Component),q(UniUserContainer,[{"key":"render","value":function render(){var e=this.props.children;return function _objectDestructuringEmpty(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(this.props),r.j.createElement(a.a,{"store":M},e)}}]),UniUserContainer}(),B=n(37),H=n(58),W=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var V=window.parent||window,z=function(e){function LoginButton(){return function login_button_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,LoginButton),function login_button_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(LoginButton.__proto__||Object.getPrototypeOf(LoginButton)).apply(this,arguments))}return function login_button_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(LoginButton,c["a"].Component),W(LoginButton,[{"key":"componentWillMount","value":function componentWillMount(){}},{"key":"componentDidMount","value":function componentDidMount(){}},{"key":"render","value":function render(){var e=this.props,t=e.loading,n=e.startLogin,o=e.returnUrl,i=e.dispatch,a="https://sso.pa-ca.me/app/login?r="+encodeURIComponent(o||V.location.href);return r.j.createElement(m.a,{"onClick":function gotoLoginPage(e){n(),e.preventDefault(),Object(H.LoginViaPopup)(V,a)(i)},"type":"primary","loading":t},"Uni 登录")}}]),LoginButton}(),G=z=Object(o.__decorate)([Object(a.b)(function(e,t){return{"loading":e.login.loading}},function(e,t){return{"dispatch":e,"startLogin":function startLogin(){return e(Object(B.f)(!0))}}})],z),J=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var Q=function(e){function LoginStatus(){return function login_status_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,LoginStatus),function login_status_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(LoginStatus.__proto__||Object.getPrototypeOf(LoginStatus)).apply(this,arguments))}return function login_status_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(LoginStatus,c["a"].Component),J(LoginStatus,[{"key":"componentWillMount","value":function componentWillMount(){this.props.startCheckingLoginStatus()}},{"key":"componentDidMount","value":function componentDidMount(){var e=this.props,t=e.setUserInfo,n=e.endCheckingLoginStatus;H.UniUser.getInfo().then(t).catch(console.error).finally(n)}},{"key":"render","value":function render(){var e=this.props,t=e.checking,n=e.hasLoggedIn;return t?r.j.createElement("p",null,"查询 Uni 登录状态中……"):n?r.j.createElement("div",null,"已登录"):r.j.createElement(G,{"returnUrl":location.origin+"/pages/callback/uni"})}}]),LoginStatus}(),K=Q=Object(o.__decorate)([Object(a.b)(function(e,t){return{"checking":e.login.checking,"hasLoggedIn":null!==e.login.user}},function(e){return{"startCheckingLoginStatus":function startCheckingLoginStatus(){return e(Object(B.e)(!0))},"setUserInfo":function setUserInfo(t){return e(Object(B.g)(t))},"endCheckingLoginStatus":function endCheckingLoginStatus(){return e(Object(B.e)(!1))}}})],Q),Y=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),X=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var $=function(e){function UnLoggedInView(){return function unlogged_in_view_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,UnLoggedInView),function unlogged_in_view_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(UnLoggedInView.__proto__||Object.getPrototypeOf(UnLoggedInView)).apply(this,arguments))}return function unlogged_in_view_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(UnLoggedInView,c["a"].Component),X(UnLoggedInView,[{"key":"render","value":function render(){var e=this.props,t=c.a.useState(!1),n=Y(t,2),o=n[0],a=n[1],s=c.a.useState(""),l=Y(s,2),p=l[0],d=l[1],f=function hideTokenModal(){return a(!1)};return r.j.createElement(i.a,{"className":"container-main"},r.j.createElement(u.a,null),r.j.createElement(F,null,r.j.createElement(K,null)),r.j.createElement(y,null),r.j.createElement(m.a,{"type":"primary","onClick":e.login,"loading":e.index.loading},c.a.getEnv()===c.a.ENV_TYPE.WEB?"微软 AD 账号":"",c.a.getEnv()===c.a.ENV_TYPE.WEAPP&&"微信授权登录"),r.j.createElement(y,null),c.a.getEnv()===c.a.ENV_TYPE.WEB?r.j.createElement(m.a,{"onClick":e.citiLogin.bind(this),"loading":e.index.loading},"花旗账号登录"):null,r.j.createElement(y,null),r.j.createElement(m.a,{"onClick":function showTokenModal(){return a(!0)},"loading":e.index.loading},"令牌登录"),r.j.createElement(v,{"isOpened":o,"onClose":f,"closeBtnPosition":"top-right"},r.j.createElement(S,{"autoFocus":!0,"focus":!0,"name":"token","title":"请输入令牌","type":"text","placeholder":"令牌","value":p,"onChange":function onChange(e){d(String(e))}}),r.j.createElement(y,null),r.j.createElement(m.a,{"type":"primary","onClick":function onClick(){e.tokenLogin(p),f()}},"登录")))}}]),UnLoggedInView}(),Z=(n(46),n(79)),ee=n(183);document.addEventListener("copy",function(){Object(s.d)({"key":"taro_clipboard","data":window.getSelection().toString()}).catch(function(e){console.error(e)})});var te=function setClipboardData(e){var t=e.data,n=e.success,r=e.fail,o=e.complete;return new Promise(function(e,i){Object(s.d)({"key":"taro_clipboard","data":t}).then(function(){if("function"!=typeof document.execCommand)throw new Error("Unsupported Function: 'document.execCommand'.");var r=document.createElement("input");r.readOnly=!0,r.value=t,r.style.position="absolute",r.style.width="100px",r.style.left="-10000px",document.body.appendChild(r),r.select(),r.setSelectionRange(0,r.value.length),document.execCommand("copy"),document.body.removeChild(r);var i={"errMsg":"setClipboardData:ok","data":t};n&&n(i),o&&o(),e(i)}).catch(function(e){var t={"errMsg":"setClipboardData:fail "+e.message};r&&r(t),o&&o(),i(t)})})},ne=n(148),re=n(166),oe=n(90),ie=(n(146),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}),ae=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var se=function(e){function UserCard(e){!function user_card_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,UserCard);var t=function user_card_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(UserCard.__proto__||Object.getPrototypeOf(UserCard)).call(this,e));return"citi"===e.user.provider&&(t.state={"profile":JSON.parse(e.user.profile)}),t}return function user_card_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(UserCard,c["a"].Component),ae(UserCard,[{"key":"render","value":function render(){return this.props.user&&(this.props.user.idToken&&this.props.user.idToken.emails?r.j.createElement(ne.a,null,this.props.user.idToken.emails.map(function(e){return r.j.createElement(re.a,{"title":e,"key":e})})):r.j.createElement(oe.a,{"title":this.props.user.display_name,"note":this.props.user.createdAt,"thumb":"https://sandbox.apihub.citi.com/gcb/authCode/resources/images/Citi-Enterprise-White.png","extra":this.state.profile?this.state.profile.customerType:""},this.renderObject(this.state.profile)))}},{"key":"renderObject","value":function renderObject(e){var t=this;if(!e)return"";return r.j.createElement(i.a,{"className":"at-article"},Object.keys(e).map(function renderThat(n){return t.renderIt(e[n],n)}))}},{"key":"renderIt","value":function renderIt(e,t){switch(void 0===e?"undefined":ie(e)){case"string":return r.j.createElement(i.a,{"className":"at-article__h3"},t,": ",e);case"object":return r.j.createElement(i.a,{"className":"at-article__section"},r.j.createElement(i.a,{"className":"at-article__h3"},t),this.renderObject(e));default:return null}}}]),UserCard}(),ce=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var ue=function(e){function LoggedInCard(){return function logged_in_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,LoggedInCard),function logged_in_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(LoggedInCard.__proto__||Object.getPrototypeOf(LoggedInCard)).apply(this,arguments))}return function logged_in_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(LoggedInCard,c["a"].Component),ce(LoggedInCard,[{"key":"render","value":function render(){var e=this.props;return r.j.createElement(se,{"user":e.user})}}]),LoggedInCard}(),le=n(158),pe=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var de=function(e){function LoggedInView(e){return function logged_in_view_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,LoggedInView),function logged_in_view_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(LoggedInView.__proto__||Object.getPrototypeOf(LoggedInView)).call(this,e))}return function logged_in_view_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(LoggedInView,c["a"].Component),pe(LoggedInView,[{"key":"issueToken","value":function(){var e=function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,o){try{var i=t[r](o),a=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}("next")})}}(regeneratorRuntime.mark(function _callee(){var e,t;return regeneratorRuntime.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:if(e=Object(s.b)("token")){n.next=5;break}return n.next=4,Object(ee.d)({"title":"操作失败，请重新登录后再试。","icon":"none","duration":3e3});case 4:return n.abrupt("return");case 5:return t=le.homepage+"pages/callback/citi?token="+e.token+"&traceId="+e.traceId,console.log("link = ",t),n.prev=7,n.next=10,te({"data":t});case 10:return n.next=12,Object(ee.d)({"title":t,"icon":"success","duration":2e3});case 12:n.next=19;break;case 14:return n.prev=14,n.t0=n.catch(7),console.error(n.t0),n.next=19,Object(ee.d)({"title":t,"icon":"none","duration":6e3});case 19:case"end":return n.stop()}},_callee,this,[[7,14]])}));return function issueToken(){return e.apply(this,arguments)}}()},{"key":"render","value":function render(){return r.j.createElement(i.a,null,r.j.createElement(ue,{"user":this.props.index.user}),r.j.createElement(y,null),r.j.createElement(m.a,{"type":"primary","onClick":this.issueToken.bind(this),"loading":this.state.issueInProgress},"颁发令牌"),r.j.createElement(y,null),r.j.createElement(m.a,{"type":"primary","onClick":this.props.logout,"loading":this.props.index.loading},"退出登录"))}}]),LoggedInView}(),fe=n(65),he=(n(159),n(36)),ge=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),ye=function get(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:get(o,t,n)}if("value"in r)return r.value;var i=r.get;return void 0!==i?i.call(n):void 0};var me=function(e){function Index(){!function index_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Index);var e=function index_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Index.__proto__||Object.getPrototypeOf(Index)).apply(this,arguments));return e.config={"navigationBarTitleText":"我的个人中心"},e.state={"popup":null,"showDrawer":!1},e}return function index_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Index,c["a"].Component),ge(Index,[{"key":"componentWillReceiveProps","value":function componentWillReceiveProps(e){console.log(this.props,e)}},{"key":"componentWillUnmount","value":function componentWillUnmount(){}},{"key":"componentDidShow","value":function componentDidShow(){this.props.setUser(fe.a.get()||Object(s.b)("userInfo"))}},{"key":"componentDidHide","value":function componentDidHide(){}},{"key":"handleClick","value":function handleClick(){console.log(arguments)}},{"key":"showDrawer","value":function showDrawer(){this.setState({"showDrawer":!0})}},{"key":"onCloseDrawer","value":function onCloseDrawer(){this.setState({"showDrawer":!1})}},{"key":"render","value":function render(){return r.j.createElement(he.a,null,r.j.createElement(i.a,{"className":"container"},this.props.index.user?r.j.createElement(de,this.props):r.j.createElement($,this.props)))}},{"key":"componentDidMount","value":function componentDidMount(){ye(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidMount",this)&&ye(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"componentDidMount",this).call(this)}}]),Index}();me=Object(o.__decorate)([Object(a.b)(function(e){return{"index":e.index}},function(e){return{"login":function login(){e(Object(B.b)()),fe.a.login().then(function(t){return e(Object(B.g)(t))})},"logout":function logout(){e(Object(B.d)()),Object(s.e)("userInfo",null),fe.a.logout(),e(Object(B.g)(null))},"setUser":function setUser(t){e(Object(B.g)(t))},"citiLogin":function citiLogin(){Object(Z.a)(e)},"tokenLogin":function tokenLogin(t){e(Object(B.b)()),fe.a.loginByToken(e)({"token":t}).then()}}})],me);t.default=me},"29":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var r=n(39),o=function(){function Utils(){}return Utils.compareObjects=function(e,t){return!(!e||!t)&&!(!e.userIdentifier||!t.userIdentifier||e.userIdentifier!==t.userIdentifier)},Utils.expiresIn=function(e){return e||(e="3599"),this.now()+parseInt(e,10)},Utils.now=function(){return Math.round((new Date).getTime()/1e3)},Utils.isEmpty=function(e){return void 0===e||!e||0===e.length},Utils.extractIdToken=function(e){var t=this.decodeJwt(e);if(!t)return null;try{var n=t.JWSPayload,r=this.base64DecodeStringUrlSafe(n);return r?JSON.parse(r):null}catch(e){}return null},Utils.base64EncodeStringUrlSafe=function(e){return window.btoa?window.btoa(e):this.encode(e)},Utils.base64DecodeStringUrlSafe=function(e){return e=e.replace(/-/g,"+").replace(/_/g,"/"),window.atob?decodeURIComponent(encodeURIComponent(window.atob(e))):decodeURIComponent(encodeURIComponent(this.decode(e)))},Utils.encode=function(e){var t,n,r,o,i,a,s,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",l=0;for(e=this.utf8Encode(e);l<e.length;)o=(t=e.charCodeAt(l++))>>2,i=(3&t)<<4|(n=e.charCodeAt(l++))>>4,a=(15&n)<<2|(r=e.charCodeAt(l++))>>6,s=63&r,isNaN(n)?a=s=64:isNaN(r)&&(s=64),u=u+c.charAt(o)+c.charAt(i)+c.charAt(a)+c.charAt(s);return u.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},Utils.utf8Encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t},Utils.decode=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=(e=String(e).replace(/=+$/,"")).length;if(n%4==1)throw new Error("The token to be decoded is not correctly encoded.");for(var r,o,i,a,s,c,u,l,p="",d=0;d<n;d+=4){if(r=t.indexOf(e.charAt(d)),o=t.indexOf(e.charAt(d+1)),i=t.indexOf(e.charAt(d+2)),a=t.indexOf(e.charAt(d+3)),d+2===n-1){c=(s=r<<18|o<<12|i<<6)>>16&255,u=s>>8&255,p+=String.fromCharCode(c,u);break}if(d+1===n-1){c=(s=r<<18|o<<12)>>16&255,p+=String.fromCharCode(c);break}c=(s=r<<18|o<<12|i<<6|a)>>16&255,u=s>>8&255,l=255&s,p+=String.fromCharCode(c,u,l)}return p},Utils.decodeJwt=function(e){if(this.isEmpty(e))return null;var t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);return!t||t.length<4?null:{"header":t[1],"JWSPayload":t[2],"JWSSig":t[3]}},Utils.deserialize=function(e){var t,n=/\+/g,r=/([^&=]+)=([^&]*)/g,o=function decode(e){return decodeURIComponent(e.replace(n," "))},i={};for(t=r.exec(e);t;)i[o(t[1])]=o(t[2]),t=r.exec(e);return i},Utils.isIntersectingScopes=function(e,t){e=this.convertToLowerCase(e);for(var n=0;n<t.length;n++)if(e.indexOf(t[n].toLowerCase())>-1)return!0;return!1},Utils.containsScope=function(e,t){return e=this.convertToLowerCase(e),t.every(function(t){return e.indexOf(t.toString().toLowerCase())>=0})},Utils.convertToLowerCase=function(e){return e.map(function(e){return e.toLowerCase()})},Utils.removeElement=function(e,t){return e.filter(function(e){return e!==t})},Utils.decimalToHex=function(e){for(var t=e.toString(16);t.length<2;)t="0"+t;return t},Utils.getLibraryVersion=function(){return"0.2.4"},Utils.replaceFirstPath=function(e,t){if(!t)return e;var n=this.GetUrlComponents(e),o=n.PathSegments;return 0===o.length||o[0]!==r.Constants.common&&o[0]!==r.Constants.organizations||(o[0]=t,e=n.Protocol+"//"+n.HostNameAndPort+"/"+o.join("/")),e},Utils.createNewGuid=function(){var e=window.crypto;if(e&&e.getRandomValues){var t=new Uint8Array(16);return e.getRandomValues(t),t[6]|=64,t[6]&=79,t[8]|=128,t[8]&=191,Utils.decimalToHex(t[0])+Utils.decimalToHex(t[1])+Utils.decimalToHex(t[2])+Utils.decimalToHex(t[3])+"-"+Utils.decimalToHex(t[4])+Utils.decimalToHex(t[5])+"-"+Utils.decimalToHex(t[6])+Utils.decimalToHex(t[7])+"-"+Utils.decimalToHex(t[8])+Utils.decimalToHex(t[9])+"-"+Utils.decimalToHex(t[10])+Utils.decimalToHex(t[11])+Utils.decimalToHex(t[12])+Utils.decimalToHex(t[13])+Utils.decimalToHex(t[14])+Utils.decimalToHex(t[15])}for(var n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",r="0123456789abcdef",o=0,i="",a=0;a<36;a++)"-"!==n[a]&&"4"!==n[a]&&(o=16*Math.random()|0),"x"===n[a]?i+=r[o]:"y"===n[a]?(o&=3,i+=r[o|=8]):i+=n[a];return i},Utils.GetUrlComponents=function(e){if(!e)throw"Url required";var t=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),n=e.match(t);if(!n||n.length<6)throw"Valid url required";var r={"Protocol":n[1],"HostNameAndPort":n[4],"AbsolutePath":n[5]},o=r.AbsolutePath.split("/");return o=o.filter(function(e){return e&&e.length>0}),r.PathSegments=o,r},Utils.CanonicalizeUri=function(e){return e&&(e=e.toLowerCase()),e&&!Utils.endsWith(e,"/")&&(e+="/"),e},Utils.endsWith=function(e,t){return!(!e||!t)&&-1!==e.indexOf(t,e.length-t.length)},Utils.checkSSO=function(e){return!(e&&(-1!==e.indexOf(r.Constants.login_hint)||-1!==e.indexOf(r.Constants.sid)))},Utils.constructUnifiedCacheExtraQueryParameter=function(e,t){return e?e.hasOwnProperty(r.Constants.upn)?(t=this.urlRemoveQueryStringParameter(t,r.Constants.login_hint),(t=this.urlRemoveQueryStringParameter(t,r.Constants.domain_hint))?t+"&"+r.Constants.login_hint+"="+e.upn+"&"+r.Constants.domain_hint+"="+r.Constants.organizations:"&"+r.Constants.login_hint+"="+e.upn+"&"+r.Constants.domain_hint+"="+r.Constants.organizations):(t=this.urlRemoveQueryStringParameter(t,r.Constants.domain_hint))?t+"&"+r.Constants.domain_hint+"="+r.Constants.organizations:"&"+r.Constants.domain_hint+"="+r.Constants.organizations:t},Utils.urlRemoveQueryStringParameter=function(e,t){if(this.isEmpty(e))return e;var n=new RegExp("(\\&"+t+"=)[^&]+");return e=e.replace(n,""),n=new RegExp("("+t+"=)[^&]+&"),e=e.replace(n,""),n=new RegExp("("+t+"=)[^&]+"),e=e.replace(n,"")},Utils}();t.Utils=o},"36":function(e,t,n){"use strict";var r=n(0),o=n(1),i=n(168),a=n(169),s=n(174),c=n(173),u=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var l=new Map([["账号信息","/"],["账号绑定","/pages/accounts/bind"],["卡片信息","/pages/cards/cards"],["产品列表","/pages/cards/product-list"]]),p=function(e){function Drawer(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Drawer),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Drawer.__proto__||Object.getPrototypeOf(Drawer)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Drawer,o["a"].Component),u(Drawer,[{"key":"render","value":function render(){var e,t=this,n=this.props,i=(e=function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,o){try{var i=t[r](o),a=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}("next")})}}(regeneratorRuntime.mark(function _callee(e){return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.navigateTo({"url":[].concat(_toConsumableArray(l.values()))[e]});case 2:case"end":return t.stop()}},_callee,t)})),function onItemClick(t){return e.apply(this,arguments)});return r.j.createElement(c.a,{"show":n.show,"right":!0,"mask":!0,"onClose":n.onClose,"items":[].concat(_toConsumableArray(l.keys())),"onItemClick":i})}}]),Drawer}();n.d(t,"a",function(){return h});var d=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var h=function(e){function HardwayLayout(){return function layout_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HardwayLayout),function layout_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(HardwayLayout.__proto__||Object.getPrototypeOf(HardwayLayout)).apply(this,arguments))}return function layout_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(HardwayLayout,o["a"].Component),f(HardwayLayout,[{"key":"render","value":function render(){var e=this.props,t=o.a.useState(!1),n=d(t,2),c=n[0],u=n[1];return r.j.createElement(i.a,{"className":"index"},r.j.createElement(a.a,null),r.j.createElement(s.a,{"onClickRgIconSt":function onOpenDrawer(){return u(!0)},"onClickRgIconNd":function onClickRgIconNd(){},"onClickLeftIcon":function onClickLeftIcon(){},"color":"#000","title":"我的个人中心","leftText":"返回","leftIconType":"chevron-left","rightFirstIconType":"bullet-list","rightSecondIconType":"user"}),r.j.createElement(i.a,{"className":"container"},e.children),r.j.createElement(p,{"show":c,"onClose":function onCloseDrawer(){return u(!1)}}))}}]),HardwayLayout}()},"37":function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"g",function(){return a}),n.d(t,"a",function(){return s}),n.d(t,"c",function(){return c}),n.d(t,"f",function(){return u}),n.d(t,"e",function(){return l});var r=n(5),o=function login(){return{"type":r.c}},i=function logout(){return{"type":r.d}},a=function setUser(e){return{"type":r.g,"user":e}},s=function loggedIn(e){return{"type":r.a,"token":e}},c=function loginCancelled(){return{"type":r.b}},u=function setLoading(e){return{"type":r.f,"loading":e}},l=function setChecking(e){return{"type":r.e,"checking":e}}},"39":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var r=function(){function Constants(){}return Object.defineProperty(Constants,"errorDescription",{"get":function get(){return"error_description"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"error",{"get":function get(){return"error"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"scope",{"get":function get(){return"scope"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"acquireTokenUser",{"get":function get(){return"msal.acquireTokenUser"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"clientInfo",{"get":function get(){return"client_info"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"clientId",{"get":function get(){return"clientId"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"authority",{"get":function get(){return"msal.authority"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"idToken",{"get":function get(){return"id_token"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"accessToken",{"get":function get(){return"access_token"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"expiresIn",{"get":function get(){return"expires_in"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"sessionState",{"get":function get(){return"session_state"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"msalClientInfo",{"get":function get(){return"msal.client.info"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"msalError",{"get":function get(){return"msal.error"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"msalErrorDescription",{"get":function get(){return"msal.error.description"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"msalSessionState",{"get":function get(){return"msal.session.state"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"tokenKeys",{"get":function get(){return"msal.token.keys"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"accessTokenKey",{"get":function get(){return"msal.access.token.key"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"expirationKey",{"get":function get(){return"msal.expiration.key"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"stateLogin",{"get":function get(){return"msal.state.login"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"stateAcquireToken",{"get":function get(){return"msal.state.acquireToken"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"stateRenew",{"get":function get(){return"msal.state.renew"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"nonceIdToken",{"get":function get(){return"msal.nonce.idtoken"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"userName",{"get":function get(){return"msal.username"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"idTokenKey",{"get":function get(){return"msal.idtoken"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"loginRequest",{"get":function get(){return"msal.login.request"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"loginError",{"get":function get(){return"msal.login.error"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"renewStatus",{"get":function get(){return"msal.token.renew.status"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"msal",{"get":function get(){return"msal"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"no_user",{"get":function get(){return"NO_USER"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"login_hint",{"get":function get(){return"login_hint"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"domain_hint",{"get":function get(){return"domain_hint"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"organizations",{"get":function get(){return"organizations"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"consumers",{"get":function get(){return"consumers"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"consumersUtid",{"get":function get(){return"9188040d-6c67-4c5b-b112-36a304b66dad"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"sid",{"get":function get(){return"sid"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"upn",{"get":function get(){return"upn"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"adalIdToken",{"get":function get(){return"adal.idtoken"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"prompt_select_account",{"get":function get(){return"&prompt=select_account"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"prompt_none",{"get":function get(){return"&prompt=none"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"prompt",{"get":function get(){return"prompt"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"response_mode_fragment",{"get":function get(){return"&response_mode=fragment"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"resourceDelimeter",{"get":function get(){return"|"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"tokenRenewStatusCancelled",{"get":function get(){return"Canceled"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"tokenRenewStatusCompleted",{"get":function get(){return"Completed"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"tokenRenewStatusInProgress",{"get":function get(){return"In Progress"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"popUpWidth",{"get":function get(){return this._popUpWidth},"set":function set(e){this._popUpWidth=e},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"popUpHeight",{"get":function get(){return this._popUpHeight},"set":function set(e){this._popUpHeight=e},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"login",{"get":function get(){return"LOGIN"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"renewToken",{"get":function get(){return"RENEW_TOKEN"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"unknown",{"get":function get(){return"UNKNOWN"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"urlHash",{"get":function get(){return"msal.urlHash"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"angularLoginRequest",{"get":function get(){return"msal.angular.login.request"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"userIdentifier",{"get":function get(){return"userIdentifier"},"enumerable":!0,"configurable":!0}),Object.defineProperty(Constants,"common",{"get":function get(){return"common"},"enumerable":!0,"configurable":!0}),Constants._popUpWidth=483,Constants._popUpHeight=600,Constants}();t.Constants=r;var o=function(){function ErrorCodes(){}return Object.defineProperty(ErrorCodes,"loginProgressError",{"get":function get(){return"login_progress_error"},"enumerable":!0,"configurable":!0}),Object.defineProperty(ErrorCodes,"acquireTokenProgressError",{"get":function get(){return"acquiretoken_progress_error"},"enumerable":!0,"configurable":!0}),Object.defineProperty(ErrorCodes,"inputScopesError",{"get":function get(){return"input_scopes_error"},"enumerable":!0,"configurable":!0}),Object.defineProperty(ErrorCodes,"endpointResolutionError",{"get":function get(){return"endpoints_resolution_error"},"enumerable":!0,"configurable":!0}),Object.defineProperty(ErrorCodes,"popUpWindowError",{"get":function get(){return"popup_window_error"},"enumerable":!0,"configurable":!0}),Object.defineProperty(ErrorCodes,"userLoginError",{"get":function get(){return"user_login_error"},"enumerable":!0,"configurable":!0}),Object.defineProperty(ErrorCodes,"userCancelledError",{"get":function get(){return"user_cancelled"},"enumerable":!0,"configurable":!0}),ErrorCodes}();t.ErrorCodes=o;var i=function(){function ErrorDescription(){}return Object.defineProperty(ErrorDescription,"loginProgressError",{"get":function get(){return"Login is in progress"},"enumerable":!0,"configurable":!0}),Object.defineProperty(ErrorDescription,"acquireTokenProgressError",{"get":function get(){return"Acquire token is in progress"},"enumerable":!0,"configurable":!0}),Object.defineProperty(ErrorDescription,"inputScopesError",{"get":function get(){return"Invalid value of input scopes provided"},"enumerable":!0,"configurable":!0}),Object.defineProperty(ErrorDescription,"endpointResolutionError",{"get":function get(){return"Endpoints cannot be resolved"},"enumerable":!0,"configurable":!0}),Object.defineProperty(ErrorDescription,"popUpWindowError",{"get":function get(){return"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser."},"enumerable":!0,"configurable":!0}),Object.defineProperty(ErrorDescription,"userLoginError",{"get":function get(){return"User login is required"},"enumerable":!0,"configurable":!0}),Object.defineProperty(ErrorDescription,"userCancelledError",{"get":function get(){return"User closed the popup window and cancelled the flow"},"enumerable":!0,"configurable":!0}),ErrorDescription}();t.ErrorDescription=i},"40":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var r=n(29),o=n(45),i=n(53);!function(e){e[e.Aad=0]="Aad",e[e.Adfs=1]="Adfs",e[e.B2C=2]="B2C"}(t.AuthorityType||(t.AuthorityType={}));var a=function(){function Authority(e,t){this.IsValidationEnabled=t,this.CanonicalAuthority=e,this.validateAsUri()}return Object.defineProperty(Authority.prototype,"Tenant",{"get":function get(){return this.CanonicalAuthorityUrlComponents.PathSegments[0]},"enumerable":!0,"configurable":!0}),Object.defineProperty(Authority.prototype,"AuthorizationEndpoint",{"get":function get(){return this.validateResolved(),this.tenantDiscoveryResponse.AuthorizationEndpoint.replace("{tenant}",this.Tenant)},"enumerable":!0,"configurable":!0}),Object.defineProperty(Authority.prototype,"EndSessionEndpoint",{"get":function get(){return this.validateResolved(),this.tenantDiscoveryResponse.EndSessionEndpoint.replace("{tenant}",this.Tenant)},"enumerable":!0,"configurable":!0}),Object.defineProperty(Authority.prototype,"SelfSignedJwtAudience",{"get":function get(){return this.validateResolved(),this.tenantDiscoveryResponse.Issuer.replace("{tenant}",this.Tenant)},"enumerable":!0,"configurable":!0}),Authority.prototype.validateResolved=function(){if(!this.tenantDiscoveryResponse)throw"Please call ResolveEndpointsAsync first"},Object.defineProperty(Authority.prototype,"CanonicalAuthority",{"get":function get(){return this.canonicalAuthority},"set":function set(e){this.canonicalAuthority=r.Utils.CanonicalizeUri(e),this.canonicalAuthorityUrlComponents=null},"enumerable":!0,"configurable":!0}),Object.defineProperty(Authority.prototype,"CanonicalAuthorityUrlComponents",{"get":function get(){return this.canonicalAuthorityUrlComponents||(this.canonicalAuthorityUrlComponents=r.Utils.GetUrlComponents(this.CanonicalAuthority)),this.canonicalAuthorityUrlComponents},"enumerable":!0,"configurable":!0}),Object.defineProperty(Authority.prototype,"DefaultOpenIdConfigurationEndpoint",{"get":function get(){return this.CanonicalAuthority+"v2.0/.well-known/openid-configuration"},"enumerable":!0,"configurable":!0}),Authority.prototype.validateAsUri=function(){var e;try{e=this.CanonicalAuthorityUrlComponents}catch(e){throw o.ErrorMessage.invalidAuthorityType}if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw o.ErrorMessage.authorityUriInsecure;if(!e.PathSegments||e.PathSegments.length<1)throw o.ErrorMessage.authorityUriInvalidPath},Authority.prototype.DiscoverEndpoints=function(e){return(new i.XhrClient).sendRequestAsync(e,"GET",!0).then(function(e){return{"AuthorizationEndpoint":e.authorization_endpoint,"EndSessionEndpoint":e.end_session_endpoint,"Issuer":e.issuer}})},Authority.prototype.ResolveEndpointsAsync=function(){var e=this,t="";return this.GetOpenIdConfigurationEndpointAsync().then(function(n){return t=n,e.DiscoverEndpoints(t)}).then(function(t){return e.tenantDiscoveryResponse=t,e})},Authority}();t.Authority=a},"44":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var r,o=n(29);!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose"}(r=t.LogLevel||(t.LogLevel={}));var i=function(){function Logger(e,t){void 0===t&&(t={}),this._level=r.Info;var n=t.correlationId,o=void 0===n?"":n,i=t.level,a=void 0===i?r.Info:i,s=t.piiLoggingEnabled,c=void 0!==s&&s;this._localCallback=e,this._correlationId=o,this._level=a,this._piiLoggingEnabled=c}return Logger.prototype.logMessage=function(e,t,n){if(!(e>this._level||!this._piiLoggingEnabled&&n)){var i,a=(new Date).toUTCString();i=o.Utils.isEmpty(this._correlationId)?a+":"+o.Utils.getLibraryVersion()+"-"+r[e]+" "+t:a+":"+this._correlationId+"-"+o.Utils.getLibraryVersion()+"-"+r[e]+" "+t,this.executeCallback(e,i,n)}},Logger.prototype.executeCallback=function(e,t,n){this._localCallback&&this._localCallback(e,t,n)},Logger.prototype.error=function(e){this.logMessage(r.Error,e,!1)},Logger.prototype.errorPii=function(e){this.logMessage(r.Error,e,!0)},Logger.prototype.warning=function(e){this.logMessage(r.Warning,e,!1)},Logger.prototype.warningPii=function(e){this.logMessage(r.Warning,e,!0)},Logger.prototype.info=function(e){this.logMessage(r.Info,e,!1)},Logger.prototype.infoPii=function(e){this.logMessage(r.Info,e,!0)},Logger.prototype.verbose=function(e){this.logMessage(r.Verbose,e,!1)},Logger.prototype.verbosePii=function(e){this.logMessage(r.Verbose,e,!0)},Logger}();t.Logger=i},"45":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var r=function(){function ErrorMessage(){}return Object.defineProperty(ErrorMessage,"authorityUriInvalidPath",{"get":function get(){return"AuthorityUriInvalidPath"},"enumerable":!0,"configurable":!0}),Object.defineProperty(ErrorMessage,"authorityUriInsecure",{"get":function get(){return"AuthorityUriInsecure"},"enumerable":!0,"configurable":!0}),Object.defineProperty(ErrorMessage,"invalidAuthorityType",{"get":function get(){return"InvalidAuthorityType"},"enumerable":!0,"configurable":!0}),Object.defineProperty(ErrorMessage,"unsupportedAuthorityValidation",{"get":function get(){return"UnsupportedAuthorityValidation"},"enumerable":!0,"configurable":!0}),Object.defineProperty(ErrorMessage,"b2cAuthorityUriInvalidPath",{"get":function get(){return"B2cAuthorityUriInvalidPath"},"enumerable":!0,"configurable":!0}),ErrorMessage}();t.ErrorMessage=r},"47":function(e,t,n){var r=n(48);"string"==typeof r&&(r=[[e.i,r,""]]);var o={"sourceMap":!1,"insertAt":"top","hmr":!0,"transform":void 0,"insertInto":void 0};n(43)(r,o);r.locals&&(e.exports=r.locals)},"48":function(e,t,n){(e.exports=n(42)(!1)).push([e.i,"button {\n  position: relative;\n  display: block;\n  width: 100%;\n  margin-left: auto;\n  margin-right: auto;\n  padding-left: 14px;\n  padding-right: 14px;\n  box-sizing: border-box;\n  font-size: 18px;\n  text-align: center;\n  text-decoration: none;\n  line-height: 2.55555556;\n  border-radius: 5px;\n  -webkit-tap-highlight-color: transparent;\n  overflow: hidden;\n  color: #000000;\n  background-color: #F8F8F8;\n}\n\nbutton[plain] {\n  color: #353535;\n  border: 1px solid #353535;\n  background-color: transparent;\n}\n\nbutton[plain][disabled] {\n  color: rgba(0, 0, 0, 0.3);\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  background-color: #F7F7F7;\n}\n\nbutton[type=primary] {\n  color: #FFFFFF;\n  background-color: #1AAD19;\n}\n\nbutton[type=primary][plain] {\n  color: #1aad19;\n  border: 1px solid #1aad19;\n  background-color: transparent;\n}\n\nbutton[type=primary][plain][disabled] {\n  color: rgba(0, 0, 0, 0.3);\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  background-color: #F7F7F7;\n}",""])},"50":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var r=function(){return function TokenResponse(){this.valid=!1,this.parameters={},this.stateMatch=!1,this.stateResponse="",this.requestType="unknown"}}();t.TokenResponse=r},"51":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var r=n(29),o=function(){function User(e,t,n,r,o,i){this.displayableId=e,this.name=t,this.identityProvider=n,this.userIdentifier=r,this.idToken=o,this.sid=i}return User.createUser=function(e,t){var n,o;t?(n=t.uid,o=t.utid):(n="",o="");var i=r.Utils.base64EncodeStringUrlSafe(n)+"."+r.Utils.base64EncodeStringUrlSafe(o);return new User(e.preferredName,e.name,e.issuer,i,e.decodedIdToken,e.sid)},User}();t.User=o},"52":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var r=n(33),o=n(40),i=n(53),a=function(e){function AadAuthority(t,n){return e.call(this,t,n)||this}return r.__extends(AadAuthority,e),Object.defineProperty(AadAuthority.prototype,"AadInstanceDiscoveryEndpointUrl",{"get":function get(){return AadAuthority.AadInstanceDiscoveryEndpoint+"?api-version=1.0&authorization_endpoint="+this.CanonicalAuthority+"oauth2/v2.0/authorize"},"enumerable":!0,"configurable":!0}),Object.defineProperty(AadAuthority.prototype,"AuthorityType",{"get":function get(){return o.AuthorityType.Aad},"enumerable":!0,"configurable":!0}),AadAuthority.prototype.GetOpenIdConfigurationEndpointAsync=function(){var e=this,t=new Promise(function(t,n){return t(e.DefaultOpenIdConfigurationEndpoint)});if(!this.IsValidationEnabled)return t;var n=this.CanonicalAuthorityUrlComponents.HostNameAndPort;return this.IsInTrustedHostList(n)?t:(new i.XhrClient).sendRequestAsync(this.AadInstanceDiscoveryEndpointUrl,"GET",!0).then(function(e){return e.tenant_discovery_endpoint})},AadAuthority.prototype.IsInTrustedHostList=function(e){return AadAuthority.TrustedHostList[e.toLowerCase()]},AadAuthority.AadInstanceDiscoveryEndpoint="https://login.microsoftonline.com/common/discovery/instance",AadAuthority.TrustedHostList={"login.windows.net":"login.windows.net","login.chinacloudapi.cn":"login.chinacloudapi.cn","login.cloudgovapi.us":"login.cloudgovapi.us","login.microsoftonline.com":"login.microsoftonline.com","login.microsoftonline.de":"login.microsoftonline.de","login.microsoftonline.us":"login.microsoftonline.us"},AadAuthority}(o.Authority);t.AadAuthority=a},"53":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var r=function(){function XhrClient(){}return XhrClient.prototype.sendRequestAsync=function(e,t,n){var r=this;return new Promise(function(n,o){var i=new XMLHttpRequest;if(i.open(t,e,!0),i.onload=function(e){(i.status<200||i.status>=300)&&o(r.handleError(i.responseText));try{var t=JSON.parse(i.responseText)}catch(e){o(r.handleError(i.responseText))}n(t)},i.onerror=function(e){o(i.status)},"GET"!==t)throw"not implemented";i.send()})},XhrClient.prototype.handleError=function(e){var t;try{if((t=JSON.parse(e)).error)return t.error;throw e}catch(t){return e}},XhrClient}();t.XhrClient=r},"65":function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(66),o=n(143),i=n(171),a=n(183),s=n(37),c=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var u,l=void 0;u={"clientID":"bacb8d3b-6ee0-4443-9bea-b54485a5a20d","authority":"https://login.microsoftonline.com/tfp/unihearti.onmicrosoft.com/B2C_1_tictactoe","b2cScopes":["https://unihearti.onmicrosoft.com/hello/demo.read"]},l=new r.UserAgentApplication(u.clientID,u.authority,function(e,t,n,r){console.log(e,t,n,r)});var p=function(){function User(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,User)}return c(User,null,[{"key":"getAgent","value":function getAgent(){return l}},{"key":"get","value":function get(){return l.getUser()}},{"key":"login","value":function login(){return l.loginRedirect(u.b2cScopes)}},{"key":"logout","value":function logout(){l.logout()}},{"key":"loginByToken","value":function loginByToken(e){var t,n=this;return t=function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,o){try{var i=t[r](o),a=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}("next")})}}(regeneratorRuntime.mark(function _callee(t){var r,c;return regeneratorRuntime.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return e(Object(s.a)(t.token)),Object(o.e)("token",t),n.prev=2,e(Object(s.b)()),n.next=6,Object(i.a)({"url":"https://uniheart.pa-ca.me/jwt/user","header":{"Authorization":"Bearer "+t.token,"accept":"application/json"},"method":"GET"});case 6:return r=n.sent,e(Object(s.a)(t.token)),e(Object(s.g)(r.data)),Object(o.e)("userInfo",r.data),n.abrupt("return",{"url":t.returnUrl||"/"});case 13:if(n.prev=13,n.t0=n.catch(2),console.error("碰到了错误：",n.t0),c="发生了错误",401!==n.t0.status){n.next=23;break}if(c="登录失败",n.t0.bodyUsed){n.next=23;break}return n.next=22,n.t0.text();case 22:c=n.sent;case 23:return n.next=25,Object(a.c)({"title":"出错了","content":c});case 25:e(Object(s.a)(""));case 26:case"end":return n.stop()}},_callee,n,[[2,13]])})),function(e){return t.apply(this,arguments)}}}]),User}()},"66":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var r=n(67);t.UserAgentApplication=r.UserAgentApplication;var o=n(44);t.Logger=o.Logger;var i=n(44);t.LogLevel=i.LogLevel;var a=n(51);t.User=a.User;var s=n(39);t.Constants=s.Constants;var c=n(50);t.TokenResponse=c.TokenResponse;var u=n(40);t.Authority=u.Authority},"67":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var r=n(33),o=n(68),i=n(69),a=n(70),s=n(71),c=n(39),u=n(72),l=n(44),p=n(73),d=n(50),f=n(51),h=n(29),g=n(75),y="id_token",m="token",b="id_token token",v=function resolveTokenOnlyIfOutOfIframe(e,t,n){var r=n.value;return n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.isInIframe()?new Promise(function(){}):r.apply(this,e)},n},C=function(){function UserAgentApplication(e,t,n,r){void 0===r&&(r={}),this._cacheLocations={"localStorage":"localStorage","sessionStorage":"sessionStorage"},this._clockSkew=300,this._tokenReceivedCallback=null,this._isAngular=!1;var o=r.validateAuthority,i=void 0===o||o,a=r.cacheLocation,s=void 0===a?"sessionStorage":a,u=r.redirectUri,d=void 0===u?function(){return window.location.href.split("?")[0].split("#")[0]}:u,f=r.postLogoutRedirectUri,h=void 0===f?function(){return window.location.href.split("?")[0].split("#")[0]}:f,g=r.logger,y=void 0===g?new l.Logger(null):g,m=r.loadFrameTimeout,b=void 0===m?6e3:m,v=r.navigateToLoginRequestUrl,C=void 0===v||v,_=r.state,w=void 0===_?"":_,k=r.isAngular,I=void 0!==k&&k,P=r.unprotectedResources,A=void 0===P?new Array:P,E=r.protectedResourceMap,O=void 0===E?new Map:E,S=r.storeAuthStateInCookie,T=void 0!==S&&S;if(this.loadFrameTimeout=b,this.clientId=e,this.validateAuthority=i,this.authority=t||"https://login.microsoftonline.com/common",this._tokenReceivedCallback=n,this._redirectUri=d,this._postLogoutredirectUri=h,this._loginInProgress=!1,this._acquireTokenInProgress=!1,this._cacheLocation=s,this._navigateToLoginRequestUrl=C,this._state=w,this._isAngular=I,this._unprotectedResources=A,this._protectedResourceMap=O,!this._cacheLocations[s])throw new Error("Cache Location is not valid. Provided value:"+this._cacheLocation+".Possible values are: "+this._cacheLocations.localStorage+", "+this._cacheLocations.sessionStorage);this._cacheStorage=new p.Storage(this._cacheLocation),this._logger=y,this.storeAuthStateInCookie=T,window.openedWindows=[],window.activeRenewals={},window.renewStates=[],window.callBackMappedToRenewStates={},window.callBacksMappedToRenewStates={},window.msal=this;var j=window.location.hash,U=this.isCallback(j);if(!this._isAngular)if(U)this.handleAuthenticationResponse.call(this,j);else{var x=this._cacheStorage.getItem(c.Constants.urlHash);x&&this.processCallBack(x)}}return Object.defineProperty(UserAgentApplication.prototype,"cacheLocation",{"get":function get(){return this._cacheLocation},"enumerable":!0,"configurable":!0}),Object.defineProperty(UserAgentApplication.prototype,"authority",{"get":function get(){return this.authorityInstance.CanonicalAuthority},"set":function set(e){this.authorityInstance=g.AuthorityFactory.CreateInstance(e,this.validateAuthority)},"enumerable":!0,"configurable":!0}),UserAgentApplication.prototype.processCallBack=function(e){this._logger.info("Processing the callback from redirect response");var t=this.getRequestInfo(e);this.saveTokenFromHash(t);var n,r=t.parameters[c.Constants.accessToken]||t.parameters[c.Constants.idToken],o=t.parameters[c.Constants.errorDescription],i=t.parameters[c.Constants.error];n=t.parameters[c.Constants.accessToken]?c.Constants.accessToken:c.Constants.idToken,this._cacheStorage.removeItem(c.Constants.urlHash);try{this._tokenReceivedCallback&&(this._cacheStorage.clearCookie(),this._tokenReceivedCallback.call(this,o,r,i,n,this.getUserState(this._cacheStorage.getItem(c.Constants.stateLogin,this.storeAuthStateInCookie))))}catch(e){this._logger.error("Error occurred in token received callback function: "+e)}},UserAgentApplication.prototype.getRedirectUri=function(){return"function"==typeof this._redirectUri?this._redirectUri():this._redirectUri},UserAgentApplication.prototype.getPostLogoutRedirectUri=function(){return"function"==typeof this._postLogoutredirectUri?this._postLogoutredirectUri():this._postLogoutredirectUri},UserAgentApplication.prototype.loginRedirect=function(e,t){var n=this;if(this._loginInProgress&&this._tokenReceivedCallback)this._tokenReceivedCallback(c.ErrorDescription.loginProgressError,null,c.ErrorCodes.loginProgressError,c.Constants.idToken,this.getUserState(this._cacheStorage.getItem(c.Constants.stateLogin,this.storeAuthStateInCookie)));else{if(e){var r=this.validateInputScope(e);if(r&&!h.Utils.isEmpty(r)&&this._tokenReceivedCallback)return void this._tokenReceivedCallback(c.ErrorDescription.inputScopesError,null,c.ErrorCodes.inputScopesError,c.Constants.idToken,this.getUserState(this._cacheStorage.getItem(c.Constants.stateLogin,this.storeAuthStateInCookie)));e=this.filterScopes(e)}var o;(o=this.extractADALIdToken())&&!e?(this._logger.info("ADAL's idToken exists. Extracting login information from ADAL's idToken "),t=h.Utils.constructUnifiedCacheExtraQueryParameter(o,t),this._silentLogin=!0,this.acquireTokenSilent([this.clientId],this.authority,this.getUser(),t).then(function(e){n._silentLogin=!1,n._logger.info("Unified cache call is successful"),n._tokenReceivedCallback&&n._tokenReceivedCallback.call(n,null,e,null,c.Constants.idToken,n.getUserState(n._silentAuthenticationState))},function(r){n._silentLogin=!1,n._logger.error("Error occurred during unified cache ATS"),n.loginRedirectHelper(e,t)})):this.loginRedirectHelper(e,t)}},UserAgentApplication.prototype.loginRedirectHelper=function(e,t){var n=this;this._loginInProgress=!0,this.authorityInstance.ResolveEndpointsAsync().then(function(){var r=new a.AuthenticationRequestParameters(n.authorityInstance,n.clientId,e,y,n.getRedirectUri(),n._state);t&&(r.extraQueryParameters=t);var o=n._cacheStorage.getItem(c.Constants.angularLoginRequest);o&&""!==o?n._cacheStorage.setItem(c.Constants.angularLoginRequest,""):o=window.location.href,n._cacheStorage.setItem(c.Constants.loginRequest,o,n.storeAuthStateInCookie),n._cacheStorage.setItem(c.Constants.loginError,""),n._cacheStorage.setItem(c.Constants.stateLogin,r.state,n.storeAuthStateInCookie),n._cacheStorage.setItem(c.Constants.nonceIdToken,r.nonce,n.storeAuthStateInCookie),n._cacheStorage.setItem(c.Constants.msalError,""),n._cacheStorage.setItem(c.Constants.msalErrorDescription,"");var i=c.Constants.authority+c.Constants.resourceDelimeter+r.state;n._cacheStorage.setItem(i,n.authority,n.storeAuthStateInCookie);var s=r.createNavigateUrl(e)+c.Constants.response_mode_fragment;n.promptUser(s)})},UserAgentApplication.prototype.loginPopup=function(e,t){var n=this;return new Promise(function(r,o){if(n._loginInProgress)o(c.ErrorCodes.loginProgressError+c.Constants.resourceDelimeter+c.ErrorDescription.loginProgressError);else{if(e){var i=n.validateInputScope(e);if(i&&!h.Utils.isEmpty(i))return void o(c.ErrorCodes.inputScopesError+c.Constants.resourceDelimeter+c.ErrorDescription.inputScopesError);e=n.filterScopes(e)}var a;(a=n.extractADALIdToken())&&!e?(n._logger.info("ADAL's idToken exists. Extracting login information from ADAL's idToken "),t=h.Utils.constructUnifiedCacheExtraQueryParameter(a,t),n._silentLogin=!0,n.acquireTokenSilent([n.clientId],n.authority,n.getUser(),t).then(function(e){n._silentLogin=!1,n._logger.info("Unified cache call is successful"),r(e)},function(i){n._silentLogin=!1,n._logger.error("Error occurred during unified cache ATS"),n.loginPopupHelper(r,o,e,t)})):n.loginPopupHelper(r,o,e,t)}})},UserAgentApplication.prototype.loginPopupHelper=function(e,t,n,r){var o=this;n||(n=[this.clientId]);var i=n.join(" ").toLowerCase(),s=this.openWindow("about:blank","_blank",1,this,e,t);s&&(this._loginInProgress=!0,this.authorityInstance.ResolveEndpointsAsync().then(function(){var u=new a.AuthenticationRequestParameters(o.authorityInstance,o.clientId,n,y,o.getRedirectUri(),o._state);r&&(u.extraQueryParameters=r),o._cacheStorage.setItem(c.Constants.loginRequest,window.location.href,o.storeAuthStateInCookie),o._cacheStorage.setItem(c.Constants.loginError,""),o._cacheStorage.setItem(c.Constants.nonceIdToken,u.nonce,o.storeAuthStateInCookie),o._cacheStorage.setItem(c.Constants.msalError,""),o._cacheStorage.setItem(c.Constants.msalErrorDescription,"");var l=c.Constants.authority+c.Constants.resourceDelimeter+u.state;o._cacheStorage.setItem(l,o.authority,o.storeAuthStateInCookie);var p=u.createNavigateUrl(n)+c.Constants.response_mode_fragment;window.renewStates.push(u.state),window.requestType=c.Constants.login,o.registerCallback(u.state,i,e,t),s&&(o._logger.infoPii("Navigated Popup window to:"+p),s.location.href=p)},function(){o._logger.info(c.ErrorCodes.endpointResolutionError+":"+c.ErrorDescription.endpointResolutionError),o._cacheStorage.setItem(c.Constants.msalError,c.ErrorCodes.endpointResolutionError),o._cacheStorage.setItem(c.Constants.msalErrorDescription,c.ErrorDescription.endpointResolutionError),t&&t(c.ErrorCodes.endpointResolutionError+":"+c.ErrorDescription.endpointResolutionError),s&&s.close()}).catch(function(e){o._logger.warning("could not resolve endpoints"),t(e)}))},UserAgentApplication.prototype.promptUser=function(e){e&&!h.Utils.isEmpty(e)?(this._logger.infoPii("Navigate to:"+e),window.location.replace(e)):this._logger.info("Navigate url is empty")},UserAgentApplication.prototype.openWindow=function(e,t,n,r,o,i){var a=this,s=this.openPopup(e,t,c.Constants.popUpWidth,c.Constants.popUpHeight);if(null==s)return r._loginInProgress=!1,r._acquireTokenInProgress=!1,this._logger.info(c.ErrorCodes.popUpWindowError+":"+c.ErrorDescription.popUpWindowError),this._cacheStorage.setItem(c.Constants.msalError,c.ErrorCodes.popUpWindowError),this._cacheStorage.setItem(c.Constants.msalErrorDescription,c.ErrorDescription.popUpWindowError),i&&i(c.ErrorCodes.popUpWindowError+c.Constants.resourceDelimeter+c.ErrorDescription.popUpWindowError),null;window.openedWindows.push(s);var u=window.setInterval(function(){if(s&&s.closed&&r._loginInProgress){if(i&&i(c.ErrorCodes.userCancelledError+c.Constants.resourceDelimeter+c.ErrorDescription.userCancelledError),window.clearInterval(u),a._isAngular)return void a.broadcast("msal:popUpClosed",c.ErrorCodes.userCancelledError+c.Constants.resourceDelimeter+c.ErrorDescription.userCancelledError);r._loginInProgress=!1,r._acquireTokenInProgress=!1}try{var e=s.location;if(-1!==e.href.indexOf(a.getRedirectUri())&&(window.clearInterval(u),r._loginInProgress=!1,r._acquireTokenInProgress=!1,a._logger.info("Closing popup window"),a._isAngular)){a.broadcast("msal:popUpHashChanged",e.hash);for(var t=0;t<window.openedWindows.length;t++)window.openedWindows[t].close()}}catch(e){}},n);return s},UserAgentApplication.prototype.broadcast=function(e,t){var n=new CustomEvent(e,{"detail":t});window.dispatchEvent(n)},UserAgentApplication.prototype.logout=function(){this.clearCache(),this._user=null;var e="";this.getPostLogoutRedirectUri()&&(e="post_logout_redirect_uri="+encodeURIComponent(this.getPostLogoutRedirectUri()));var t=this.authority+"/oauth2/v2.0/logout?"+e;this.promptUser(t)},UserAgentApplication.prototype.clearCache=function(){window.renewStates=[];for(var e=this._cacheStorage.getAllAccessTokens(c.Constants.clientId,c.Constants.userIdentifier),t=0;t<e.length;t++)this._cacheStorage.removeItem(JSON.stringify(e[t].key));this._cacheStorage.resetCacheItems(),this._cacheStorage.clearCookie()},UserAgentApplication.prototype.clearCacheForScope=function(e){for(var t=this._cacheStorage.getAllAccessTokens(c.Constants.clientId,c.Constants.userIdentifier),n=0;n<t.length;n++){var r=t[n];r.value.accessToken===e&&this._cacheStorage.removeItem(JSON.stringify(r.key))}},UserAgentApplication.prototype.openPopup=function(e,t,n,r){try{var o=window.screenLeft?window.screenLeft:window.screenX,i=window.screenTop?window.screenTop:window.screenY,a=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,s=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=a/2-n/2+o,u=s/2-r/2+i,l=window.open(e,t,"width="+n+", height="+r+", top="+u+", left="+c);return l.focus&&l.focus(),l}catch(e){return this._logger.error("error opening popup "+e.message),this._loginInProgress=!1,this._acquireTokenInProgress=!1,null}},UserAgentApplication.prototype.validateInputScope=function(e){if(!e||e.length<1)return"Scopes cannot be passed as an empty array";if(!Array.isArray(e))throw new Error("API does not accept non-array scopes");return e.indexOf(this.clientId)>-1&&e.length>1?"ClientId can only be provided as a single scope":""},UserAgentApplication.prototype.filterScopes=function(e){return e=(e=e.filter(function(e){return"openid"!==e})).filter(function(e){return"profile"!==e})},UserAgentApplication.prototype.registerCallback=function(e,t,n,r){var o=this;window.activeRenewals[t]=e,window.callBacksMappedToRenewStates[e]||(window.callBacksMappedToRenewStates[e]=[]),window.callBacksMappedToRenewStates[e].push({"resolve":n,"reject":r}),window.callBackMappedToRenewStates[e]||(window.callBackMappedToRenewStates[e]=function(n,r,i,a){window.activeRenewals[t]=null;for(var s=0;s<window.callBacksMappedToRenewStates[e].length;++s)try{n||i?window.callBacksMappedToRenewStates[e][s].reject(n+c.Constants.resourceDelimeter+i):r&&window.callBacksMappedToRenewStates[e][s].resolve(r)}catch(e){o._logger.warning(e)}window.callBacksMappedToRenewStates[e]=null,window.callBackMappedToRenewStates[e]=null})},UserAgentApplication.prototype.getCachedTokenInternal=function(e,t){var n,r=t||this.getUser();if(!r)return null;var o=this.authorityInstance?this.authorityInstance:g.AuthorityFactory.CreateInstance(this.authority,this.validateAuthority);return n=h.Utils.compareObjects(r,this.getUser())?e.indexOf(this.clientId)>-1?new a.AuthenticationRequestParameters(o,this.clientId,e,y,this.getRedirectUri(),this._state):new a.AuthenticationRequestParameters(o,this.clientId,e,m,this.getRedirectUri(),this._state):new a.AuthenticationRequestParameters(o,this.clientId,e,b,this.getRedirectUri(),this._state),this.getCachedToken(n,t)},UserAgentApplication.prototype.getCachedToken=function(e,t){var n=null,r=e.scopes,o=this._cacheStorage.getAllAccessTokens(this.clientId,t?t.userIdentifier:null);if(0===o.length)return null;var i=[];if(e.authority){for(a=0;a<o.length;a++){c=(s=o[a]).key.scopes.split(" ");h.Utils.containsScope(c,r)&&s.key.authority===e.authority&&i.push(s)}if(0===i.length)return null;if(1!==i.length)return{"errorDesc":"The cache contains multiple tokens satisfying the requirements.Call AcquireToken again providing more requirements like authority","token":null,"error":"multiple_matching_tokens_detected"};n=i[0]}else{for(var a=0;a<o.length;a++){var s,c=(s=o[a]).key.scopes.split(" ");h.Utils.containsScope(c,r)&&i.push(s)}if(1===i.length)n=i[0],e.authorityInstance=g.AuthorityFactory.CreateInstance(n.key.authority,this.validateAuthority);else{if(i.length>1)return{"errorDesc":"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements like authority","token":null,"error":"multiple_matching_tokens_detected"};var u=this.getUniqueAuthority(o,"authority");if(u.length>1)return{"errorDesc":"Multiple authorities found in the cache. Pass authority in the API overload.","token":null,"error":"multiple_matching_tokens_detected"};e.authorityInstance=g.AuthorityFactory.CreateInstance(u[0],this.validateAuthority)}}if(null!=n){var l=Number(n.value.expiresIn),p=this._clockSkew||300;return l&&l>h.Utils.now()+p?{"errorDesc":null,"token":n.value.accessToken,"error":null}:(this._cacheStorage.removeItem(JSON.stringify(i[0].key)),null)}return null},UserAgentApplication.prototype.getAllUsers=function(){for(var e=[],t=this._cacheStorage.getAllAccessTokens(c.Constants.clientId,c.Constants.userIdentifier),n=0;n<t.length;n++){var r=new u.IdToken(t[n].value.idToken),o=new s.ClientInfo(t[n].value.clientInfo),i=f.User.createUser(r,o);e.push(i)}return this.getUniqueUsers(e)},UserAgentApplication.prototype.getUniqueUsers=function(e){if(!e||e.length<=1)return e;for(var t=[],n=[],r=0;r<e.length;++r)e[r].userIdentifier&&-1===t.indexOf(e[r].userIdentifier)&&(t.push(e[r].userIdentifier),n.push(e[r]));return n},UserAgentApplication.prototype.getUniqueAuthority=function(e,t){var n=[],r=[];return e.forEach(function(e){e.key.hasOwnProperty(t)&&-1===r.indexOf(e.key[t])&&(r.push(e.key[t]),n.push(e.key[t]))}),n},UserAgentApplication.prototype.addHintParameters=function(e,t){var n=t||this.getUser();if(n){var r=n.userIdentifier.split("."),o=h.Utils.base64DecodeStringUrlSafe(r[0]),i=h.Utils.base64DecodeStringUrlSafe(r[1]);n.sid&&-1!==e.indexOf(c.Constants.prompt_none)?this.urlContainsQueryStringParameter(c.Constants.sid,e)||this.urlContainsQueryStringParameter(c.Constants.login_hint,e)||(e+="&"+c.Constants.sid+"="+encodeURIComponent(n.sid)):this.urlContainsQueryStringParameter(c.Constants.login_hint,e)||!n.displayableId||h.Utils.isEmpty(n.displayableId)||(e+="&"+c.Constants.login_hint+"="+encodeURIComponent(n.displayableId)),h.Utils.isEmpty(o)||h.Utils.isEmpty(i)||(this.urlContainsQueryStringParameter("domain_req",e)||h.Utils.isEmpty(i)||(e+="&domain_req="+encodeURIComponent(i)),this.urlContainsQueryStringParameter("login_req",e)||h.Utils.isEmpty(o)||(e+="&login_req="+encodeURIComponent(o))),this.urlContainsQueryStringParameter(c.Constants.domain_hint,e)||h.Utils.isEmpty(i)||(i===c.Constants.consumersUtid?e+="&"+c.Constants.domain_hint+"="+encodeURIComponent(c.Constants.consumers):e+="&"+c.Constants.domain_hint+"="+encodeURIComponent(c.Constants.organizations))}return e},UserAgentApplication.prototype.urlContainsQueryStringParameter=function(e,t){return new RegExp("[\\?&]"+e+"=").test(t)},UserAgentApplication.prototype.acquireTokenRedirect=function(e,t,n,r){var o=this,i=this.validateInputScope(e);if(i&&!h.Utils.isEmpty(i)&&this._tokenReceivedCallback)this._tokenReceivedCallback(c.ErrorDescription.inputScopesError,null,c.ErrorCodes.inputScopesError,c.Constants.accessToken,this.getUserState(this._cacheStorage.getItem(c.Constants.stateLogin,this.storeAuthStateInCookie)));else{e&&(e=this.filterScopes(e));var s=n||this.getUser();if(!this._acquireTokenInProgress){var u;e.join(" ").toLowerCase();if(!(s||r&&-1!==r.indexOf(c.Constants.login_hint))&&this._tokenReceivedCallback)return this._logger.info("User login is required"),void this._tokenReceivedCallback(c.ErrorDescription.userLoginError,null,c.ErrorCodes.userLoginError,c.Constants.accessToken,this.getUserState(this._cacheStorage.getItem(c.Constants.stateLogin,this.storeAuthStateInCookie)));this._acquireTokenInProgress=!0;var l=t?g.AuthorityFactory.CreateInstance(t,this.validateAuthority):this.authorityInstance;l.ResolveEndpointsAsync().then(function(){var t;u=h.Utils.compareObjects(s,o.getUser())?e.indexOf(o.clientId)>-1?new a.AuthenticationRequestParameters(l,o.clientId,e,y,o.getRedirectUri(),o._state):new a.AuthenticationRequestParameters(l,o.clientId,e,m,o.getRedirectUri(),o._state):new a.AuthenticationRequestParameters(l,o.clientId,e,b,o.getRedirectUri(),o._state),o._cacheStorage.setItem(c.Constants.nonceIdToken,u.nonce,o.storeAuthStateInCookie),t=s?c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+s.userIdentifier+c.Constants.resourceDelimeter+u.state:c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+c.Constants.no_user+c.Constants.resourceDelimeter+u.state,o._cacheStorage.setItem(t,JSON.stringify(s));var n=c.Constants.authority+c.Constants.resourceDelimeter+u.state;o._cacheStorage.setItem(n,l.CanonicalAuthority,o.storeAuthStateInCookie),r&&(u.extraQueryParameters=r);var i=u.createNavigateUrl(e)+c.Constants.response_mode_fragment;(i=o.addHintParameters(i,s))&&(o._cacheStorage.setItem(c.Constants.stateAcquireToken,u.state,o.storeAuthStateInCookie),window.location.replace(i))})}}},UserAgentApplication.prototype.acquireTokenPopup=function(e,t,n,r){var o=this;return new Promise(function(i,s){var u=o.validateInputScope(e);u&&!h.Utils.isEmpty(u)&&s(c.ErrorCodes.inputScopesError+c.Constants.resourceDelimeter+u),e&&(e=o.filterScopes(e));var l=n||o.getUser();if(o._acquireTokenInProgress)s(c.ErrorCodes.acquireTokenProgressError+c.Constants.resourceDelimeter+c.ErrorDescription.acquireTokenProgressError);else{var p,d=e.join(" ").toLowerCase();if(!(l||r&&-1!==r.indexOf(c.Constants.login_hint)))return o._logger.info("User login is required"),void s(c.ErrorCodes.userLoginError+c.Constants.resourceDelimeter+c.ErrorDescription.userLoginError);o._acquireTokenInProgress=!0;var f=t?g.AuthorityFactory.CreateInstance(t,o.validateAuthority):o.authorityInstance,v=o.openWindow("about:blank","_blank",1,o,i,s);v&&f.ResolveEndpointsAsync().then(function(){var t;p=h.Utils.compareObjects(l,o.getUser())?e.indexOf(o.clientId)>-1?new a.AuthenticationRequestParameters(f,o.clientId,e,y,o.getRedirectUri(),o._state):new a.AuthenticationRequestParameters(f,o.clientId,e,m,o.getRedirectUri(),o._state):new a.AuthenticationRequestParameters(f,o.clientId,e,b,o.getRedirectUri(),o._state),o._cacheStorage.setItem(c.Constants.nonceIdToken,p.nonce),p.state=p.state,t=l?c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+l.userIdentifier+c.Constants.resourceDelimeter+p.state:c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+c.Constants.no_user+c.Constants.resourceDelimeter+p.state,o._cacheStorage.setItem(t,JSON.stringify(l));var n=c.Constants.authority+c.Constants.resourceDelimeter+p.state;o._cacheStorage.setItem(n,f.CanonicalAuthority,o.storeAuthStateInCookie),r&&(p.extraQueryParameters=r);var u=p.createNavigateUrl(e)+c.Constants.response_mode_fragment;u=o.addHintParameters(u,l),window.renewStates.push(p.state),window.requestType=c.Constants.renewToken,o.registerCallback(p.state,d,i,s),v&&(v.location.href=u)},function(){o._logger.info(c.ErrorCodes.endpointResolutionError+":"+c.ErrorDescription.endpointResolutionError),o._cacheStorage.setItem(c.Constants.msalError,c.ErrorCodes.endpointResolutionError),o._cacheStorage.setItem(c.Constants.msalErrorDescription,c.ErrorDescription.endpointResolutionError),s&&s(c.ErrorCodes.endpointResolutionError+c.Constants.resourceDelimeter+c.ErrorDescription.endpointResolutionError),v&&v.close()}).catch(function(e){o._logger.warning("could not resolve endpoints"),s(e)})}})},UserAgentApplication.prototype.acquireTokenSilent=function(e,t,n,r){var o=this;return new Promise(function(i,s){var u=o.validateInputScope(e);if(u&&!h.Utils.isEmpty(u))return s(c.ErrorCodes.inputScopesError+"|"+u),null;e&&(e=o.filterScopes(e));var l,p=e.join(" ").toLowerCase(),d=n||o.getUser(),f=o._cacheStorage.getItem(c.Constants.adalIdToken);if(!d&&h.Utils.checkSSO(r)&&h.Utils.isEmpty(f))return o._logger.info("User login is required"),s(c.ErrorCodes.userLoginError+c.Constants.resourceDelimeter+c.ErrorDescription.userLoginError),null;if(!d&&!h.Utils.isEmpty(f)){var v=h.Utils.extractIdToken(f);console.log("ADAL's idToken exists. Extracting login information from ADAL's idToken "),r=h.Utils.constructUnifiedCacheExtraQueryParameter(v,r)}l=h.Utils.compareObjects(d,o.getUser())?e.indexOf(o.clientId)>-1?new a.AuthenticationRequestParameters(g.AuthorityFactory.CreateInstance(t,o.validateAuthority),o.clientId,e,y,o.getRedirectUri(),o._state):new a.AuthenticationRequestParameters(g.AuthorityFactory.CreateInstance(t,o.validateAuthority),o.clientId,e,m,o.getRedirectUri(),o._state):e.indexOf(o.clientId)>-1?new a.AuthenticationRequestParameters(g.AuthorityFactory.CreateInstance(t,o.validateAuthority),o.clientId,e,y,o.getRedirectUri(),o._state):new a.AuthenticationRequestParameters(g.AuthorityFactory.CreateInstance(t,o.validateAuthority),o.clientId,e,b,o.getRedirectUri(),o._state);var C=o.getCachedToken(l,d);if(C){if(C.token)return o._logger.info("Token is already in cache for scope:"+p),i(C.token),null;if(C.errorDesc||C.error)return o._logger.infoPii(C.errorDesc+":"+C.error),s(C.errorDesc+c.Constants.resourceDelimeter+C.error),null}else o._logger.verbose("Token is not in cache for scope:"+p);return l.authorityInstance||(l.authorityInstance=t?g.AuthorityFactory.CreateInstance(t,o.validateAuthority):o.authorityInstance),l.authorityInstance.ResolveEndpointsAsync().then(function(){window.activeRenewals[p]?(o._logger.verbose("Renew token for scope: "+p+" is in progress. Registering callback"),o.registerCallback(window.activeRenewals[p],p,i,s)):e&&e.indexOf(o.clientId)>-1&&1===e.length?(o._logger.verbose("renewing idToken"),o.renewIdToken(e,i,s,d,l,r)):(o._logger.verbose("renewing accesstoken"),o.renewToken(e,i,s,d,l,r))}).catch(function(e){return o._logger.warning("could not resolve endpoints"),s(e),null})})},UserAgentApplication.prototype.extractADALIdToken=function(){var e=this._cacheStorage.getItem(c.Constants.adalIdToken);return h.Utils.isEmpty(e)?null:h.Utils.extractIdToken(e)},UserAgentApplication.prototype.loadIframeTimeout=function(e,t,n){var r=this,o=window.activeRenewals[n];this._logger.verbose("Set loading state to pending for: "+n+":"+o),this._cacheStorage.setItem(c.Constants.renewStatus+o,c.Constants.tokenRenewStatusInProgress),this.loadFrame(e,t),setTimeout(function(){r._cacheStorage.getItem(c.Constants.renewStatus+o)===c.Constants.tokenRenewStatusInProgress&&(r._logger.verbose("Loading frame has timed out after: "+r.loadFrameTimeout/1e3+" seconds for scope "+n+":"+o),o&&window.callBackMappedToRenewStates[o]&&window.callBackMappedToRenewStates[o]("Token renewal operation failed due to timeout",null,"Token Renewal Failed",c.Constants.accessToken),r._cacheStorage.setItem(c.Constants.renewStatus+o,c.Constants.tokenRenewStatusCancelled))},this.loadFrameTimeout)},UserAgentApplication.prototype.loadFrame=function(e,t){var n=this;this._logger.info("LoadFrame: "+t);var r=t;setTimeout(function(){var o=n.addAdalFrame(r);""!==o.src&&"about:blank"!==o.src||(o.src=e,n._logger.infoPii("Frame Name : "+t+" Navigated to: "+e))},500)},UserAgentApplication.prototype.addAdalFrame=function(e){if(void 0===e)return null;this._logger.info("Add msal frame to document:"+e);var t=document.getElementById(e);if(!t){if(document.createElement&&document.documentElement&&-1===window.navigator.userAgent.indexOf("MSIE 5.0")){var n=document.createElement("iframe");n.setAttribute("id",e),n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height="0",n.style.border="0",t=document.getElementsByTagName("body")[0].appendChild(n)}else document.body&&document.body.insertAdjacentHTML&&document.body.insertAdjacentHTML("beforeend","<iframe name='"+e+"' id='"+e+"' style='display:none'></iframe>");window.frames&&window.frames[e]&&(t=window.frames[e])}return t},UserAgentApplication.prototype.renewToken=function(e,t,n,r,o,i){var a=e.join(" ").toLowerCase();this._logger.verbose("renewToken is called for scope:"+a);var s,u=this.addAdalFrame("msalRenewFrame"+a);i&&(o.extraQueryParameters=i),s=r?c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+r.userIdentifier+c.Constants.resourceDelimeter+o.state:c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+c.Constants.no_user+c.Constants.resourceDelimeter+o.state,this._cacheStorage.setItem(s,JSON.stringify(r));var l=c.Constants.authority+c.Constants.resourceDelimeter+o.state;this._cacheStorage.setItem(l,o.authority),this._cacheStorage.setItem(c.Constants.nonceIdToken,o.nonce),this._logger.verbose("Renew token Expected state: "+o.state);var p=h.Utils.urlRemoveQueryStringParameter(o.createNavigateUrl(e),c.Constants.prompt)+c.Constants.prompt_none;p=this.addHintParameters(p,r),window.renewStates.push(o.state),window.requestType=c.Constants.renewToken,this.registerCallback(o.state,a,t,n),this._logger.infoPii("Navigate to:"+p),u.src="about:blank",this.loadIframeTimeout(p,"msalRenewFrame"+a,a)},UserAgentApplication.prototype.renewIdToken=function(e,t,n,r,o,i){e.join(" ").toLowerCase();this._logger.info("renewidToken is called");var a,s=this.addAdalFrame("msalIdTokenFrame");i&&(o.extraQueryParameters=i),a=r?c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+r.userIdentifier+c.Constants.resourceDelimeter+o.state:c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+c.Constants.no_user+c.Constants.resourceDelimeter+o.state,this._cacheStorage.setItem(a,JSON.stringify(r));var u=c.Constants.authority+c.Constants.resourceDelimeter+o.state;this._cacheStorage.setItem(u,o.authority),this._cacheStorage.setItem(c.Constants.nonceIdToken,o.nonce),this._logger.verbose("Renew Idtoken Expected state: "+o.state);var l=h.Utils.urlRemoveQueryStringParameter(o.createNavigateUrl(e),c.Constants.prompt)+c.Constants.prompt_none;l=this.addHintParameters(l,r),this._silentLogin?(window.requestType=c.Constants.login,this._silentAuthenticationState=o.state):(window.requestType=c.Constants.renewToken,window.renewStates.push(o.state)),this.registerCallback(o.state,this.clientId,t,n),this._logger.infoPii("Navigate to:"+l),s.src="about:blank",this.loadIframeTimeout(l,"msalIdTokenFrame",this.clientId)},UserAgentApplication.prototype.getUser=function(){if(this._user)return this._user;var e=this._cacheStorage.getItem(c.Constants.idTokenKey),t=this._cacheStorage.getItem(c.Constants.msalClientInfo);if(!h.Utils.isEmpty(e)&&!h.Utils.isEmpty(t)){var n=new u.IdToken(e),r=new s.ClientInfo(t);return this._user=f.User.createUser(n,r),this._user}return null},UserAgentApplication.prototype.handleAuthenticationResponse=function(e){null==e&&(e=window.location.hash);var t=null,n=!1,r=!1;try{r=window.opener&&window.opener.msal&&window.opener.msal!==window.msal}catch(e){r=!1}r?(t=window.opener.msal,n=!0):window.parent&&window.parent.msal&&(t=window.parent.msal);var o,i=t.getRequestInfo(e),a=null,s=null;if(t._logger.info("Returned from redirect url"),window.parent!==window&&window.parent.msal)s=window.parent.callBackMappedToRenewStates[i.stateResponse];else if(r)s=window.opener.callBackMappedToRenewStates[i.stateResponse];else{if(t._navigateToLoginRequestUrl)return s=null,t._cacheStorage.setItem(c.Constants.urlHash,e),!1,void(window.parent!==window||n||(window.location.href=t._cacheStorage.getItem(c.Constants.loginRequest,this.storeAuthStateInCookie)));s=t._tokenReceivedCallback,window.location.hash=""}t.saveTokenFromHash(i),i.requestType===c.Constants.renewToken&&window.parent?(window.parent!==window?t._logger.verbose("Window is in iframe, acquiring token silently"):t._logger.verbose("acquiring token interactive in progress"),a=i.parameters[c.Constants.accessToken]||i.parameters[c.Constants.idToken],o=c.Constants.accessToken):i.requestType===c.Constants.login&&(a=i.parameters[c.Constants.idToken],o=c.Constants.idToken);var u=i.parameters[c.Constants.errorDescription],l=i.parameters[c.Constants.error];try{s&&(i.stateMatch?s.call(t,u,a,l,o,this.getUserState(i.stateResponse)):s.call(t,u,a,l,o,null))}catch(e){t._logger.error("Error occurred in token received callback function: "+e)}if(r)for(var p=0;p<window.opener.openedWindows.length;p++)window.opener.openedWindows[p].close()},UserAgentApplication.prototype.saveAccessToken=function(e,t,n,r,a){var u,l=new s.ClientInfo(r);if(t.parameters.hasOwnProperty("scope")){for(var p=(u=t.parameters.scope).split(" "),d=this._cacheStorage.getAllAccessTokens(this.clientId,e),f=0;f<d.length;f++){var g=d[f];if(g.key.userIdentifier===n.userIdentifier){var y=g.key.scopes.split(" ");h.Utils.isIntersectingScopes(y,p)&&this._cacheStorage.removeItem(JSON.stringify(g.key))}}var m=new o.AccessTokenKey(e,this.clientId,u,l.uid,l.utid),b=new i.AccessTokenValue(t.parameters[c.Constants.accessToken],a.rawIdToken,h.Utils.expiresIn(t.parameters[c.Constants.expiresIn]).toString(),r);this._cacheStorage.setItem(JSON.stringify(m),JSON.stringify(b))}else{u=this.clientId;m=new o.AccessTokenKey(e,this.clientId,u,l.uid,l.utid),b=new i.AccessTokenValue(t.parameters[c.Constants.idToken],t.parameters[c.Constants.idToken],a.expiration,r);this._cacheStorage.setItem(JSON.stringify(m),JSON.stringify(b))}},UserAgentApplication.prototype.saveTokenFromHash=function(e){this._logger.info("State status:"+e.stateMatch+"; Request type:"+e.requestType),this._cacheStorage.setItem(c.Constants.msalError,""),this._cacheStorage.setItem(c.Constants.msalErrorDescription,"");var t="",n="";if(e.parameters.hasOwnProperty("scope")?e.parameters.scope.toLowerCase():this.clientId,e.parameters.hasOwnProperty(c.Constants.errorDescription)||e.parameters.hasOwnProperty(c.Constants.error)){if(this._logger.infoPii("Error :"+e.parameters[c.Constants.error]+"; Error description:"+e.parameters[c.Constants.errorDescription]),this._cacheStorage.setItem(c.Constants.msalError,e.parameters.error),this._cacheStorage.setItem(c.Constants.msalErrorDescription,e.parameters[c.Constants.errorDescription]),e.requestType===c.Constants.login&&(this._loginInProgress=!1,this._cacheStorage.setItem(c.Constants.loginError,e.parameters[c.Constants.errorDescription]+":"+e.parameters[c.Constants.error]),t=c.Constants.authority+c.Constants.resourceDelimeter+e.stateResponse),e.requestType===c.Constants.renewToken){this._acquireTokenInProgress=!1,t=c.Constants.authority+c.Constants.resourceDelimeter+e.stateResponse;var r=null!==this.getUser()?this.getUser().userIdentifier:"";n=c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+r+c.Constants.resourceDelimeter+e.stateResponse}}else if(e.stateMatch){var o;this._logger.info("State is right"),e.parameters.hasOwnProperty(c.Constants.sessionState)&&this._cacheStorage.setItem(c.Constants.msalSessionState,e.parameters[c.Constants.sessionState]);var i="";if(e.parameters.hasOwnProperty(c.Constants.accessToken)){this._logger.info("Fragment has access token"),this._acquireTokenInProgress=!1;var a=void 0;o=e.parameters.hasOwnProperty(c.Constants.idToken)?new u.IdToken(e.parameters[c.Constants.idToken]):new u.IdToken(this._cacheStorage.getItem(c.Constants.idTokenKey)),t=c.Constants.authority+c.Constants.resourceDelimeter+e.stateResponse;var l=this._cacheStorage.getItem(t,this.storeAuthStateInCookie);h.Utils.isEmpty(l)||(l=h.Utils.replaceFirstPath(l,o.tenantId)),e.parameters.hasOwnProperty(c.Constants.clientInfo)?(i=e.parameters[c.Constants.clientInfo],a=f.User.createUser(o,new s.ClientInfo(i))):(this._logger.warning("ClientInfo not received in the response from AAD"),a=f.User.createUser(o,new s.ClientInfo(i))),n=c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+a.userIdentifier+c.Constants.resourceDelimeter+e.stateResponse;var p=c.Constants.acquireTokenUser+c.Constants.resourceDelimeter+c.Constants.no_user+c.Constants.resourceDelimeter+e.stateResponse,d=this._cacheStorage.getItem(n),g=void 0;h.Utils.isEmpty(d)?h.Utils.isEmpty(this._cacheStorage.getItem(p))||this.saveAccessToken(l,e,a,i,o):(g=JSON.parse(d),a&&g&&h.Utils.compareObjects(a,g)?(this.saveAccessToken(l,e,a,i,o),this._logger.info("The user object received in the response is the same as the one passed in the acquireToken request")):this._logger.warning("The user object created from the response is not the same as the one passed in the acquireToken request"))}if(e.parameters.hasOwnProperty(c.Constants.idToken)){this._logger.info("Fragment has id token"),this._loginInProgress=!1,o=new u.IdToken(e.parameters[c.Constants.idToken]),e.parameters.hasOwnProperty(c.Constants.clientInfo)?i=e.parameters[c.Constants.clientInfo]:this._logger.warning("ClientInfo not received in the response from AAD"),t=c.Constants.authority+c.Constants.resourceDelimeter+e.stateResponse;l=this._cacheStorage.getItem(t,this.storeAuthStateInCookie);h.Utils.isEmpty(l)||(l=h.Utils.replaceFirstPath(l,o.tenantId)),this._user=f.User.createUser(o,new s.ClientInfo(i)),o&&o.nonce?o.nonce!==this._cacheStorage.getItem(c.Constants.nonceIdToken,this.storeAuthStateInCookie)?(this._user=null,this._cacheStorage.setItem(c.Constants.loginError,"Nonce Mismatch. Expected Nonce: "+this._cacheStorage.getItem(c.Constants.nonceIdToken,this.storeAuthStateInCookie)+",Actual Nonce: "+o.nonce),this._logger.error("Nonce Mismatch.Expected Nonce: "+this._cacheStorage.getItem(c.Constants.nonceIdToken,this.storeAuthStateInCookie)+",Actual Nonce: "+o.nonce)):(this._cacheStorage.setItem(c.Constants.idTokenKey,e.parameters[c.Constants.idToken]),this._cacheStorage.setItem(c.Constants.msalClientInfo,i),this.saveAccessToken(l,e,this._user,i,o)):(t=e.stateResponse,n=e.stateResponse,this._logger.error("Invalid id_token received in the response"),e.parameters.error="invalid idToken",e.parameters.error_description="Invalid idToken. idToken: "+e.parameters[c.Constants.idToken],this._cacheStorage.setItem(c.Constants.msalError,"invalid idToken"),this._cacheStorage.setItem(c.Constants.msalErrorDescription,"Invalid idToken. idToken: "+e.parameters[c.Constants.idToken]))}}else t=e.stateResponse,n=e.stateResponse,this._logger.error("State Mismatch.Expected State: "+this._cacheStorage.getItem(c.Constants.stateLogin,this.storeAuthStateInCookie)+",Actual State: "+e.stateResponse),e.parameters.error="Invalid_state",e.parameters.error_description="Invalid_state. state: "+e.stateResponse,this._cacheStorage.setItem(c.Constants.msalError,"Invalid_state"),this._cacheStorage.setItem(c.Constants.msalErrorDescription,"Invalid_state. state: "+e.stateResponse);this._cacheStorage.setItem(c.Constants.renewStatus+e.stateResponse,c.Constants.tokenRenewStatusCompleted),this._cacheStorage.removeAcquireTokenEntries(t,n),this.storeAuthStateInCookie&&(this._cacheStorage.setItemCookie(t,"",-1),this._cacheStorage.clearCookie())},UserAgentApplication.prototype.isCallback=function(e){e=this.getHash(e);var t=h.Utils.deserialize(e);return t.hasOwnProperty(c.Constants.errorDescription)||t.hasOwnProperty(c.Constants.error)||t.hasOwnProperty(c.Constants.accessToken)||t.hasOwnProperty(c.Constants.idToken)},UserAgentApplication.prototype.getHash=function(e){return e.indexOf("#/")>-1?e=e.substring(e.indexOf("#/")+2):e.indexOf("#")>-1&&(e=e.substring(1)),e},UserAgentApplication.prototype.getRequestInfo=function(e){e=this.getHash(e);var t=h.Utils.deserialize(e),n=new d.TokenResponse;if(t&&(n.parameters=t,t.hasOwnProperty(c.Constants.errorDescription)||t.hasOwnProperty(c.Constants.error)||t.hasOwnProperty(c.Constants.accessToken)||t.hasOwnProperty(c.Constants.idToken))){n.valid=!0;var r=void 0;if(!t.hasOwnProperty("state"))return n;if(r=t.state,n.stateResponse=r,r===this._cacheStorage.getItem(c.Constants.stateLogin,this.storeAuthStateInCookie)||r===this._silentAuthenticationState)return n.requestType=c.Constants.login,n.stateMatch=!0,n;if(r===this._cacheStorage.getItem(c.Constants.stateAcquireToken,this.storeAuthStateInCookie))return n.requestType=c.Constants.renewToken,n.stateMatch=!0,n;if(!n.stateMatch){n.requestType=window.requestType;for(var o=window.renewStates,i=0;i<o.length;i++)if(o[i]===n.stateResponse){n.stateMatch=!0;break}}}return n},UserAgentApplication.prototype.getScopeFromState=function(e){if(e){var t=e.indexOf("|");if(t>-1&&t+1<e.length)return e.substring(t+1)}return""},UserAgentApplication.prototype.getUserState=function(e){if(e){var t=e.indexOf("|");if(t>-1&&t+1<e.length)return e.substring(t+1)}return""},UserAgentApplication.prototype.isInIframe=function(){return window.parent!==window},UserAgentApplication.prototype.loginInProgress=function(){return!!this._cacheStorage.getItem(c.Constants.urlHash)||this._loginInProgress},UserAgentApplication.prototype.getHostFromUri=function(e){var t=String(e).replace(/^(https?:)\/\//,"");return t=t.split("/")[0]},UserAgentApplication.prototype.getScopesForEndpoint=function(e){if(this._unprotectedResources.length>0)for(var t=0;t<this._unprotectedResources.length;t++)if(e.indexOf(this._unprotectedResources[t])>-1)return null;if(this._protectedResourceMap.size>0)for(var n=0,r=Array.from(this._protectedResourceMap.keys());n<r.length;n++){var o=r[n];if(e.indexOf(o)>-1)return this._protectedResourceMap.get(o)}return e.indexOf("http://")>-1||e.indexOf("https://")>-1?this.getHostFromUri(e)===this.getHostFromUri(this.getRedirectUri())?new Array(this.clientId):null:new Array(this.clientId)},UserAgentApplication.prototype.setloginInProgress=function(e){this._loginInProgress=e},UserAgentApplication.prototype.getAcquireTokenInProgress=function(){return this._acquireTokenInProgress},UserAgentApplication.prototype.setAcquireTokenInProgress=function(e){this._acquireTokenInProgress=e},UserAgentApplication.prototype.getLogger=function(){return this._logger},r.__decorate([v],UserAgentApplication.prototype,"acquireTokenSilent",null),UserAgentApplication}();t.UserAgentApplication=C},"68":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var r=n(29),o=function(){return function AccessTokenKey(e,t,n,o,i){this.authority=e,this.clientId=t,this.scopes=n,this.userIdentifier=r.Utils.base64EncodeStringUrlSafe(o)+"."+r.Utils.base64EncodeStringUrlSafe(i)}}();t.AccessTokenKey=o},"69":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var r=function(){return function AccessTokenValue(e,t,n,r){this.accessToken=e,this.idToken=t,this.expiresIn=n,this.clientInfo=r}}();t.AccessTokenValue=r},"70":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var r=n(29),o=function(){function AuthenticationRequestParameters(e,t,n,o,i,a){this.authorityInstance=e,this.clientId=t,this.scopes=n,this.responseType=o,this.redirectUri=i,this.correlationId=r.Utils.createNewGuid(),this.state=a&&!r.Utils.isEmpty(a)?r.Utils.createNewGuid()+"|"+a:r.Utils.createNewGuid(),this.nonce=r.Utils.createNewGuid(),this.xClientSku="MSAL.JS",this.xClientVer=r.Utils.getLibraryVersion()}return Object.defineProperty(AuthenticationRequestParameters.prototype,"authority",{"get":function get(){return this.authorityInstance?this.authorityInstance.CanonicalAuthority:null},"enumerable":!0,"configurable":!0}),AuthenticationRequestParameters.prototype.createNavigateUrl=function(e){var t=this.createNavigationUrlString(e),n=this.authorityInstance.AuthorizationEndpoint;return n.indexOf("?")<0?n+="?":n+="&",""+n+t.join("&")},AuthenticationRequestParameters.prototype.createNavigationUrlString=function(e){e||(e=[this.clientId]),-1===e.indexOf(this.clientId)&&e.push(this.clientId);var t=[];return t.push("response_type="+this.responseType),this.translateclientIdUsedInScope(e),t.push("scope="+encodeURIComponent(this.parseScope(e))),t.push("client_id="+encodeURIComponent(this.clientId)),t.push("redirect_uri="+encodeURIComponent(this.redirectUri)),t.push("state="+encodeURIComponent(this.state)),t.push("nonce="+encodeURIComponent(this.nonce)),t.push("client_info=1"),t.push("x-client-SKU="+this.xClientSku),t.push("x-client-Ver="+this.xClientVer),this.extraQueryParameters&&t.push(this.extraQueryParameters),t.push("client-request-id="+encodeURIComponent(this.correlationId)),t},AuthenticationRequestParameters.prototype.translateclientIdUsedInScope=function(e){var t=e.indexOf(this.clientId);t>=0&&(e.splice(t,1),-1===e.indexOf("openid")&&e.push("openid"),-1===e.indexOf("profile")&&e.push("profile"))},AuthenticationRequestParameters.prototype.parseScope=function(e){var t="";if(e)for(var n=0;n<e.length;++n)t+=n!==e.length-1?e[n]+" ":e[n];return t},AuthenticationRequestParameters}();t.AuthenticationRequestParameters=o},"71":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var r=n(29),o=function(){function ClientInfo(e){if(!e||r.Utils.isEmpty(e))return this.uid="",void(this.utid="");try{var t=r.Utils.base64DecodeStringUrlSafe(e),n=JSON.parse(t);n&&(n.hasOwnProperty("uid")&&(this.uid=n.uid),n.hasOwnProperty("utid")&&(this.utid=n.utid))}catch(e){throw new Error(e)}}return Object.defineProperty(ClientInfo.prototype,"uid",{"get":function get(){return this._uid?this._uid:""},"set":function set(e){this._uid=e},"enumerable":!0,"configurable":!0}),Object.defineProperty(ClientInfo.prototype,"utid",{"get":function get(){return this._utid?this._utid:""},"set":function set(e){this._utid=e},"enumerable":!0,"configurable":!0}),ClientInfo}();t.ClientInfo=o},"72":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var r=n(29),o=function(){return function IdToken(e){if(r.Utils.isEmpty(e))throw new Error("null or empty raw idtoken");try{this.rawIdToken=e,this.decodedIdToken=r.Utils.extractIdToken(e),this.decodedIdToken&&(this.decodedIdToken.hasOwnProperty("iss")&&(this.issuer=this.decodedIdToken.iss),this.decodedIdToken.hasOwnProperty("oid")&&(this.objectId=this.decodedIdToken.oid),this.decodedIdToken.hasOwnProperty("sub")&&(this.subject=this.decodedIdToken.sub),this.decodedIdToken.hasOwnProperty("tid")&&(this.tenantId=this.decodedIdToken.tid),this.decodedIdToken.hasOwnProperty("ver")&&(this.version=this.decodedIdToken.ver),this.decodedIdToken.hasOwnProperty("preferred_username")&&(this.preferredName=this.decodedIdToken.preferred_username),this.decodedIdToken.hasOwnProperty("name")&&(this.name=this.decodedIdToken.name),this.decodedIdToken.hasOwnProperty("nonce")&&(this.nonce=this.decodedIdToken.nonce),this.decodedIdToken.hasOwnProperty("exp")&&(this.expiration=this.decodedIdToken.exp),this.decodedIdToken.hasOwnProperty("home_oid")&&(this.homeObjectId=this.decodedIdToken.home_oid),this.decodedIdToken.hasOwnProperty("sid")&&(this.sid=this.decodedIdToken.sid))}catch(e){throw new Error("Failed to parse the returned id token")}}}();t.IdToken=o},"73":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var r=n(39),o=n(74),i=function(){function Storage(e){if(Storage._instance)return Storage._instance;if(this._cacheLocation=e,this._localStorageSupported=void 0!==window[this._cacheLocation]&&null!=window[this._cacheLocation],this._sessionStorageSupported=void 0!==window[e]&&null!=window[e],Storage._instance=this,!this._localStorageSupported&&!this._sessionStorageSupported)throw new Error("localStorage and sessionStorage not supported");return Storage._instance}return Storage.prototype.setItem=function(e,t,n){window[this._cacheLocation]&&window[this._cacheLocation].setItem(e,t),n&&this.setItemCookie(e,t)},Storage.prototype.getItem=function(e,t){return t&&this.getItemCookie(e)?this.getItemCookie(e):window[this._cacheLocation]?window[this._cacheLocation].getItem(e):null},Storage.prototype.removeItem=function(e){if(window[this._cacheLocation])return window[this._cacheLocation].removeItem(e)},Storage.prototype.clear=function(){if(window[this._cacheLocation])return window[this._cacheLocation].clear()},Storage.prototype.getAllAccessTokens=function(e,t){var n,r=[],i=window[this._cacheLocation];if(i){var a=void 0;for(a in i)if(i.hasOwnProperty(a)&&a.match(e)&&a.match(t)){var s=this.getItem(a);s&&(n=new o.AccessTokenCacheItem(JSON.parse(a),JSON.parse(s)),r.push(n))}}return r},Storage.prototype.removeAcquireTokenEntries=function(e,t){var n=window[this._cacheLocation];if(n){var r=void 0;for(r in n)n.hasOwnProperty(r)&&(""!==e&&r.indexOf(e)>-1||""!==t&&r.indexOf(t)>-1)&&this.removeItem(r)}},Storage.prototype.resetCacheItems=function(){var e=window[this._cacheLocation];if(e){var t=void 0;for(t in e)e.hasOwnProperty(t)&&(-1!==t.indexOf(r.Constants.msal)&&this.setItem(t,""),-1!==t.indexOf(r.Constants.renewStatus)&&this.removeItem(t))}},Storage.prototype.setItemCookie=function(e,t,n){var r=e+"="+t+";";n&&(r+="expires="+this.setExpirationCookie(n)+";");document.cookie=r},Storage.prototype.getItemCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return""},Storage.prototype.setExpirationCookie=function(e){var t=new Date;return new Date(t.getTime()+24*e*60*60*1e3).toUTCString()},Storage.prototype.clearCookie=function(){this.setItemCookie(r.Constants.nonceIdToken,"",-1),this.setItemCookie(r.Constants.stateLogin,"",-1),this.setItemCookie(r.Constants.loginRequest,"",-1),this.setItemCookie(r.Constants.stateAcquireToken,"",-1)},Storage}();t.Storage=i},"74":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var r=function(){return function AccessTokenCacheItem(e,t){this.key=e,this.value=t}}();t.AccessTokenCacheItem=r},"75":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var r=n(29),o=n(52),i=n(76),a=n(40),s=n(45),c=function(){function AuthorityFactory(){}return AuthorityFactory.DetectAuthorityFromUrl=function(e){switch(e=r.Utils.CanonicalizeUri(e),r.Utils.GetUrlComponents(e).PathSegments[0]){case"tfp":return a.AuthorityType.B2C;case"adfs":return a.AuthorityType.Adfs;default:return a.AuthorityType.Aad}},AuthorityFactory.CreateInstance=function(e,t){if(r.Utils.isEmpty(e))return null;switch(AuthorityFactory.DetectAuthorityFromUrl(e)){case a.AuthorityType.B2C:return new i.B2cAuthority(e,t);case a.AuthorityType.Aad:return new o.AadAuthority(e,t);default:throw s.ErrorMessage.invalidAuthorityType}},AuthorityFactory}();t.AuthorityFactory=c},"76":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var r=n(33),o=n(52),i=n(40),a=n(45),s=n(29),c=function(e){function B2cAuthority(t,n){var r=e.call(this,t,n)||this,o=s.Utils.GetUrlComponents(t),i=o.PathSegments;if(i.length<3)throw a.ErrorMessage.b2cAuthorityUriInvalidPath;return r.CanonicalAuthority="https://"+o.HostNameAndPort+"/"+i[0]+"/"+i[1]+"/"+i[2]+"/",r}return r.__extends(B2cAuthority,e),Object.defineProperty(B2cAuthority.prototype,"AuthorityType",{"get":function get(){return i.AuthorityType.B2C},"enumerable":!0,"configurable":!0}),B2cAuthority.prototype.GetOpenIdConfigurationEndpointAsync=function(){var e=this,t=new Promise(function(t,n){return t(e.DefaultOpenIdConfigurationEndpoint)});return this.IsValidationEnabled?this.IsInTrustedHostList(this.CanonicalAuthorityUrlComponents.HostNameAndPort)?t:new Promise(function(e,t){return t(a.ErrorMessage.unsupportedAuthorityValidation)}):t},B2cAuthority}(o.AadAuthority);t.B2cAuthority=c},"79":function(e,t,n){"use strict";var r=n(143),o=n(1),i=n(171),a=n(64),s=n.n(a),c=n(37);var u=null;function popupLogic(){try{u.location.href}catch(e){console.error("打开子窗口失败：",e),u.close(),window.alert("之前打开的窗口已关闭, 请重新点击并在新打开的窗口中重试。")}finally{u&&u.postMessage("https://uniheart.herokuapp.com/passport/citi?redirect_uri="+encodeURIComponent(window.location.origin+"/pages/callback/citi"),window.location.origin)}}t.a=function(e){Object(r.e)("returnPath",window.location.pathname),e(Object(c.b)());var t,n=setInterval(function(){u?u.closed&&(console.log("login cancelled!"),e(Object(c.c)()),clearInterval(n),o.a.navigateTo({"url":window.location.pathname})):clearInterval(n)},1e3);u&&!u.closed||(u=window.open())&&u.document.write('<html>\n  <head>\n    <title>第三方登录 我的个人中心</title>\n  </head>\n  <body>\n    <p>正在加载中, 请稍等 ……</p>\n    <script>\n      window.addEventListener(\n        "message",\n        function(event) {\n          console.log(event.data);\n\n          if (\n            event.data.indexOf("http://") === 0 ||\n            event.data.indexOf("https://") === 0 ||\n            event.data.indexOf("//") === 0\n          ) {\n            location.href = event.data;\n          }\n        },\n        false\n      );\n\n      window.opener.postMessage("listenerLoaded", window.location.origin);\n    <\/script>\n  </body>\n</html>\n'),window.addEventListener("message",(t=function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,o){try{var i=t[r](o),a=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(a).then(function(e){step("next",e)},function(e){step("throw",e)});e(a)}("next")})}}(regeneratorRuntime.mark(function _callee(t){var n,a,l;return regeneratorRuntime.wrap(function _callee$(p){for(;;)switch(p.prev=p.next){case 0:if(console.log("event = ",t),t.origin===window.location.origin){p.next=3;break}return p.abrupt("return");case 3:if(t.data){p.next=5;break}return p.abrupt("return");case 5:if("listenerLoaded"!==t.data){p.next=7;break}return p.abrupt("return",popupLogic());case 7:if("string"!=typeof t.data||0!==t.data.indexOf("?")){p.next=27;break}if(n=s.a.parse(t.data.substr(1)),console.log(n),!n.token){p.next=26;break}return e(Object(c.a)(n.token)),p.prev=12,p.next=15,Object(i.a)({"url":"https://uniheart.pa-ca.me/jwt/user","header":{"Authorization":"Bearer "+n.token},"method":"GET"});case 15:return a=p.sent,e(Object(c.g)(a.data)),l=Object(r.b)("returnPath"),console.log("即将跳转到：",l),p.next=21,o.a.navigateTo({"url":l,"success":function success(){return Object(r.c)("returnPath")}});case 21:p.next=26;break;case 23:p.prev=23,p.t0=p.catch(12),console.error(p.t0);case 26:return p.abrupt("return",(u||t.source).close());case 27:case"end":return p.stop()}},_callee,this,[[12,23]])})),function(e){return t.apply(this,arguments)}),!1),popupLogic()}},"88":function(e,t,n){"use strict";n(34);var r=n(0),o=n(41),i=n(28),a=n.n(i),s=(n(47),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),c=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{"value":n,"enumerable":!0,"configurable":!0,"writable":!0}):e[t]=n,e}var u=function(e){function Button(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Button);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Button.__proto__||Object.getPrototypeOf(Button)).apply(this,arguments));return e.state={"hover":!1,"touch":!1},e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Button,r["j"].Component),c(Button,[{"key":"render","value":function render(){var e,t=this,n=this.props,i=n.children,c=n.disabled,u=n.className,l=n.style,p=n.onClick,d=n.onTouchStart,f=n.onTouchEnd,h=n.hoverClass,g=void 0===h?"button-hover":h,y=n.hoverStartTime,m=void 0===y?20:y,b=n.hoverStayTime,v=void 0===b?70:b,C=n.size,_=n.plain,w=n.loading,k=void 0!==w&&w,I=n.type,P=void 0===I?"default":I,A=u||a()("weui-btn",(_defineProperty(e={},""+g,this.state.hover&&!c),_defineProperty(e,"weui-btn_plain-"+P,_),_defineProperty(e,"weui-btn_"+P,!_&&P),_defineProperty(e,"weui-btn_mini","mini"===C),_defineProperty(e,"weui-btn_loading",k),_defineProperty(e,"weui-btn_disabled",c),e));return r.j.createElement("button",s({},Object(o.a)(this.props,["hoverClass","onTouchStart","onTouchEnd"]),{"className":A,"style":l,"onClick":p,"disabled":c,"onTouchStart":function _onTouchStart(e){t.setState(function(){return{"touch":!0}}),g&&!c&&setTimeout(function(){t.state.touch&&t.setState(function(){return{"hover":!0}})},m),d&&d(e)},"onTouchEnd":function _onTouchEnd(e){t.setState(function(){return{"touch":!1}}),g&&!c&&setTimeout(function(){t.state.touch||t.setState(function(){return{"hover":!1}})},v),f&&f(e)}}),k&&r.j.createElement("i",{"class":"weui-loading"}),i)}}]),Button}();t.a=u},"90":function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r,o,i=n(0),a=n(168),s=n(172),c=n(170),u=n(32),l=n.n(u),p=n(28),d=n.n(p),f=n(49),h=n.n(f),g=n(30),y=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{"value":n,"enumerable":!0,"configurable":!0,"writable":!0}):e[t]=n,e}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=(r=function(e){function AtCard(){var e,t,n;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AtCard);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=n=_possibleConstructorReturn(this,(e=AtCard.__proto__||Object.getPrototypeOf(AtCard)).call.apply(e,[this].concat(i))),o.call(n),_possibleConstructorReturn(n,t)}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AtCard,g["a"]),y(AtCard,[{"key":"render","value":function render(){var e,t=this.props,n=t.title,r=t.note,o=t.extra,u=t.thumb,l=t.isFull,p=t.icon,f=d()("at-card",{"at-card--full":l},this.props.className),h=d()((_defineProperty(e={"at-icon":!0},"at-icon-"+(p&&p.value),p&&p.value),_defineProperty(e,"at-card__header-icon",!0),e)),g={"color":p&&p.color||"","fontSize":p&&p.size+"px"||""};return i.j.createElement(a.a,{"onClick":this.handleClick,"className":f},i.j.createElement(a.a,{"className":"at-card__header"},u&&i.j.createElement(a.a,{"className":"at-card__header-thumb"},i.j.createElement(s.a,{"className":"at-card__header-thumb-info","mode":"scaleToFill","src":u})),!u&&p&&p.value&&i.j.createElement(c.a,{"className":h,"style":g}),i.j.createElement(c.a,{"className":"at-card__header-title"},n),o&&i.j.createElement(c.a,{"className":"at-card__header-extra"},o)),i.j.createElement(a.a,{"className":"at-card__content"},i.j.createElement(a.a,{"className":"at-card__content-info"},this.props.children),r&&i.j.createElement(a.a,{"className":"at-card__content-note"},r)))}}]),AtCard}(),o=function _initialiseProps(){var e=this;this.handleClick=function(){var t;h()(e.props.onClick)&&(t=e.props).onClick.apply(t,arguments)}},r);m.defaultProps={"note":"","isFull":!1,"thumb":"","title":"","extra":"","icon":{},"onClick":function onClick(){}},m.propTypes={"note":l.a.string,"isFull":l.a.bool,"thumb":l.a.string,"title":l.a.string,"extra":l.a.string,"icon":l.a.object,"onClick":l.a.func},m.defaultProps={"note":"","isFull":!1,"thumb":"","title":"","extra":"","onClick":function onClick(){}}},"95":function(e,t,n){}}]);